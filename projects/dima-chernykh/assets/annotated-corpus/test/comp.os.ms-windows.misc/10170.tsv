From from From
: : :
yuki yuki yuki
@ @ @
is is be
. . .
s s s
. . .
u u u
- - -
tokyo tokyo tokyo
. . .
ac ac ac
. . .
jp jp jp
( ( (
ITO ito ITO
Takayuki takayuki Takayuki
) ) )
Subject subject Subject
: : :
Re re Re
: : :
What what What
does doe do
the the the
. . .
bmp bmp bmp
format format format
mean mean mean
? ? ?
Organization organ Organization
: : :
Department depart Department
of of of
Infomation infom Infomation
Science scienc Science
, , ,
Faculty faculti Faculty
of of of
Science scienc Science
, , ,
University univers University
of of of
Tokyo tokyo Tokyo
, , ,
JAPAN japan JAPAN
Lines line Lines
: : :
508 508 508
In in In
- - -
Reply repli Reply
- - -
To to To
: : :
robertsa robertsa robertsa
@ @ @
unix unix unix
2 2 2
. . .
tcd tcd tcd
. . .
ie ie ie
' ' '
s s s
message messag message
of of of
Tue tue Tue
, , ,
27 27 27
Apr apr Apr
1993 1993 1993
14 14 14
: : :
48 48 48
: : :
04 04 04
GMT gmt GMT
Nntp nntp Nntp
- - -
Posting post Posting
- - -
Host host Host
: : :
tje tje tje
12 12 12
. . .
is is be
. . .
s s s
. . .
u u u
- - -
tokyo tokyo tokyo
. . .
ac ac ac
. . .
jp jp jp
In in In
article articl article
< < <
robertsa robertsa robertsa
. . .
735922084 735922084 735922084
@ @ @
unix unix unix
2 2 2
. . .
tcd tcd tcd
. . .
ie ie ie
> > >
robertsa robertsa robertsa
@ @ @
unix unix unix
2 2 2
. . .
tcd tcd tcd
. . .
ie ie ie
( ( (
Andrew andrew Andrew
L l L
. . .
Roberts robert Roberts
) ) )
writes write write
: : :
> > >
What what What
exactly exact exactly
does doe do
the the the
windows window window
bitmap bitmap bitmap
format format format
look look look
like like like
? ? ?
I i I
mean mean mean
, , ,
how how how
is is be
> > >
the the the
data data data
stored store store
: : :
width width width
, , ,
height height height
, , ,
no no no
. . .
of of of
colours colour colour
, , ,
bitmap bitmap bitmap
data data data
? ? ?
I i I
couldn couldn couldn
' ' '
t t t
> > >
find find find
anything anyth anything
in in in
ths ths th
user user user
manual manual manual
, , ,
is is be
there there there
any ani any
other other other
reference refer reference
material materi material
> > >
which which which
would would would
give give give
me me me
this this this
information inform information
? ? ?
From from From
: : :
thomas thoma thomas
@ @ @
sunshine sunshin sunshine
. . .
Kodak kodak Kodak
. . .
COM com COM
( ( (
Thomas thoma Thomas
Kinsman kinsman Kinsman
) ) )
Newsgroups newsgroup Newsgroups
: : :
comp comp comp
. . .
os os o
. . .
ms ms m
- - -
windows window window
. . .
programmer programm programmer
. . .
misc misc misc
, , ,
alt alt alt
. . .
binaries binari binary
. . .
pictures pictur picture
. . .
utilities util utility
Subject subject Subject
: : :
DIB dib DIB
/ / /
BMP bmp BMP
CREATION creation CREATION
GUIDE guid GUIDE
, , ,
as as a
requested request request
. . .
Keywords keyword Keywords
: : :
DIB dib DIB
BMP bmp BMP
Bitmaps bitmap Bitmaps
File file File
Formats format Formats
Message messag Message
- - -
ID id ID
: : :
< < <
1992 1992 1992
Dec dec Dec
23 23 23
. . .
214432 214432 214432
. . .
18764 18764 18764
@ @ @
kodak kodak kodak
. . .
kodak kodak kodak
. . .
com com com
> > >
Date date Date
: : :
23 23 23
Dec dec Dec
92 92 92
21 21 21
: : :
44 44 44
: : :
32 32 32
GMT gmt GMT
Sender sender Sender
: : :
news news news
@ @ @
kodak kodak kodak
. . .
kodak kodak kodak
. . .
com com com
Organization organ Organization
: : :
Precambiran precambiran Precambiran
Electronics electron Electronics
, , ,
Rochester rochest Rochester
, , ,
NY ny NY
Lines line Lines
: : :
484 484 484
Xref xref Xref
: : :
cradle cradl cradle
. . .
titech titech titech
comp comp comp
. . .
os os o
. . .
ms ms m
- - -
windows window window
. . .
programmer programm programmer
. . .
misc misc misc
: : :
3609 3609 3609
GUIDE guid GUIDE
TO to TO
CREATION creation CREATION
OF of OF
DIB dib DIB
IMAGES imag IMAGES
Thomas thoma Thomas
B b B
. . .
Kinsman kinsman Kinsman
Precambrian precambrian Precambrian
Electronics electron Electronics
29 29 29
Falstaff falstaff Falstaff
Rd rd Rd
. . .
Rochester rochest Rochester
, , ,
NY ny NY
14609 14609 14609
thomask thomask thomask
@ @ @
kodak kodak kodak
. . .
com com com
Copyright copyright Copyright
March march March
15 15 15
, , ,
1991 1991 1991
ABSTRACT abstract ABSTRACT
The the The
format format format
of of of
images imag image
created creat create
for for for
use use use
by by by
MS ms MS
Windows window Windows
3 3 3
. . .
0 0 0
/ / /
3 3 3
. . .
1 1 1
applications applic application
is is be
documented document document
in in in
the the the
MS ms MS
Windows window Windows
Programmer programm Programmer
' ' '
s s s
Reference refer Reference
guide guid guide
. . .
This this This
guide guid guide
is is be
intended intend intend
as as a
a a a
clearify clearifi clearify
some some some
wording word wording
of of of
the the the
specifications specif specification
, , ,
and and and
to to to
put put put
forth forth forth
a a a
recommendation recommend recommendation
among among among
the the the
various various various
alternatives altern alternative
. . .
Please pleas Please
send send send
updates updat update
/ / /
corrections correct correction
/ / /
suggestions suggest suggestion
and and and
revisions revis revision
to to to
me me me
. . .
Please pleas Please
thank thank thank
me me me
for for for
writing write write
this this this
on on on
my my my
own own own
time time time
by by by
keeping keep keep
my my my
name name name
with with with
the the the
document document document
. . .
Thank thank Thank
you you you
for for for
your your your
respect respect respect
. . .
This this This
document document document
Copyright copyright Copyright
, , ,
1991 1991 1991
, , ,
by by by
Thomas thoma Thomas
B b B
. . .
Kinsman kinsman Kinsman
. . .
If if If
desired desir desire
, , ,
a a a
PostScript postscript PostScript
version version version
of of of
this this this
document document document
is is be
available avail available
. . .
This this This
information inform information
is is be
free free free
. . .
You you You
get get get
more more more
than than than
what what what
you you you
pay pay pay
for for for
. . .
Don don Don
' ' '
t t t
sue sue sue
me me me
if if if
I i I
' ' '
m m m
wrong wrong wrong
. . .
OVERVIEW overview OVERVIEW
The the The
DIB dib DIB
image imag image
file file file
format format format
is is be
intended intend intend
to to to
be be be
a a a
" " "
Device devic Device
Independent independ Independent
Bitmap bitmap Bitmap
" " "
file file file
format format format
. . .
( ( (
What what What
Microsoft microsoft Microsoft
means mean mean
by by by
" " "
Device devic Device
Independent independ Independent
" " "
is is be
unclear unclear unclear
to to to
me me me
. . .
) ) )
Four four Four
pixel pixel pixel
resolutions resolut resolution
are are be
supported support support
: : :
1 1 1
bit bit bit
, , ,
4 4 4
bit bit bit
, , ,
8 8 8
bit bit bit
, , ,
and and and
24 24 24
bit bit bit
pixels pixel pixel
. . .
These these These
images imag image
were were be
intended intend intend
for for for
use use use
on on on
DOS dos DOS
( ( (
IBM ibm IBM
, , ,
or or or
Little littl Little
- - -
Endian endian Endian
) ) )
systems system system
. . .
If if If
you you you
are are be
creating creat create
them them them
on on on
another anoth another
architecture architectur architecture
you you you
will will will
have have have
to to to
byte byte byte
- - -
swap swap swap
all all all
short short short
and and and
long long long
integer integ integer
values valu value
. . .
By by By
convention convent convention
, , ,
DIB dib DIB
images imag image
end end end
in in in
the the the
extension extens extension
" " "
. . .
BMP bmp BMP
" " "
. . .
This this This
is is be
because becaus because
March march March
15 15 15
, , ,
1991 1991 1991
- - -
2 2 2
- - -
they they they
are are be
a a a
super super super
- - -
set set set
of of of
earlier earlier early
" " "
bitmap bitmap bitmap
image imag image
files file file
" " "
. . .
Consequently consequ Consequently
you you you
will will will
sometimes sometim sometimes
hear hear hear
DIB dib DIB
files file file
referred refer refer
to to to
as as a
" " "
BMP bmp BMP
" " "
files file file
. . .
Since sinc Since
DIB dib DIB
images imag image
files file file
are are be
a a a
super super super
- - -
set set set
, , ,
there there there
are are be
three three three
" " "
flavors flavor flavor
" " "
of of of
DIB dib DIB
images imag image
: : :
o o o
DOS dos DOS
DIB dib DIB
images imag image
. . .
These these These
are are be
the the the
recommended recommend recommended
convention convent convention
, , ,
and and and
the the the
form form form
which which which
I i I
will will will
describe describ describe
how how how
to to to
create creat create
. . .
They they They
are are be
intended intend intend
for for for
applications applic application
running run run
under under under
MS ms MS
Windows window Windows
/ / /
3 3 3
. . .
0 0 0
in in in
a a a
DOS dos DOS
environment environ environment
. . .
o o o
OS os OS
/ / /
2 2 2
DIB dib DIB
images imag image
. . .
My my My
understanding understand understanding
is is be
that that that
these these these
are are be
the the the
flavor flavor flavor
of of of
DIB dib DIB
images imag image
that that that
were were be
used use use
by by by
the the the
Presentation present Presentation
Manager manag Manager
. . .
o o o
Old old Old
- - -
style style style
Bitmap bitmap Bitmap
images imag image
. . .
March march March
15 15 15
, , ,
1991 1991 1991
- - -
3 3 3
- - -
DIFFERENCES differ DIFFERENCES
BETWEEN between BETWEEN
FLAVORS flavor FLAVORS
The the The
DOS dos DOS
DIB dib DIB
images imag image
consist consist consist
of of of
: : :
1 1 1
. . .
A a A
" " "
BITMAPFILEHEADER bitmapfilehead BITMAPFILEHEADER
" " "
file file file
header header header
which which which
identifies identifi identify
the the the
file file file
as as a
a a a
DIB dib DIB
file file file
. . .
This this This
header header header
also also also
gives give give
the the the
total total total
size size size
of of of
the the the
image imag image
file file file
, , ,
and and and
the the the
offset offset offset
to to to
the the the
image imag image
data data data
. . .
2 2 2
. . .
A a A
" " "
BITMAPINFOHEADER bitmapinfohead BITMAPINFOHEADER
" " "
image imag image
header header header
which which which
specifies specifi specify
the the the
image imag image
attributes attribut attribute
. . .
3 3 3
. . .
An an An
optional option optional
palette palett palette
of of of
colors color color
used use use
by by by
the the the
image imag image
. . .
If if If
it it it
exists exist exist
, , ,
this this this
may may may
contain contain contain
2 2 2
, , ,
16 16 16
, , ,
or or or
256 256 256
entries entri entry
. . .
Each each Each
entry entri entry
is is be
a a a
Windows window Windows
RGBQUAD rgbquad RGBQUAD
structure structur structure
. . .
4 4 4
. . .
The the The
image imag image
data data data
itself itself itself
. . .
The the The
OS os OS
/ / /
2 2 2
DIB dib DIB
images imag image
consist consist consist
of of of
: : :
1 1 1
. . .
The the The
same same same
" " "
BITMAPFILEHEADER bitmapfilehead BITMAPFILEHEADER
" " "
file file file
header header header
which which which
identifies identifi identify
the the the
file file file
as as a
a a a
DIB dib DIB
file file file
. . .
This this This
header header header
also also also
gives give give
the the the
total total total
size size size
of of of
the the the
image imag image
file file file
, , ,
and and and
the the the
offset offset offset
to to to
the the the
image imag image
data data data
. . .
2 2 2
. . .
A a A
" " "
BITMAPCOREHEADER bitmapcorehead BITMAPCOREHEADER
" " "
image imag image
header header header
which which which
specifies specifi specify
the the the
image imag image
attributes attribut attribute
. . .
3 3 3
. . .
An an An
optional option optional
palette palett palette
of of of
colors color color
used use use
by by by
the the the
image imag image
. . .
Again again Again
, , ,
if if if
this this this
exists exist exist
it it it
may may may
contain contain contain
2 2 2
, , ,
16 16 16
, , ,
or or or
256 256 256
entries entri entry
. . .
Each each Each
entry entri entry
is is be
a a a
Windows window Windows
RGBTRIPLE rgbtripl RGBTRIPLE
structure structur structure
. . .
4 4 4
. . .
The the The
image imag image
data data data
itself itself itself
. . .
The the The
Old old Old
Style style Style
image imag image
bitmap bitmap bitmap
consists consist consist
of of of
: : :
1 1 1
. . .
Either either Either
a a a
BITMAPINFOHEADER bitmapinfohead BITMAPINFOHEADER
or or or
a a a
BITMAPCOREHEADER bitmapcorehead BITMAPCOREHEADER
. . .
Which which Which
header header header
type type type
is is be
determined determin determine
by by by
the the the
first first first
long long long
integer integ integer
( ( (
DWORD dword DWORD
) ) )
value valu value
. . .
2 2 2
. . .
An an An
optional option optional
color color color
palette palett palette
. . .
This this This
palette palett palette
may may may
be be be
composed compos compose
of of of
either either either
Windows window Windows
RGBQUAD rgbquad RGBQUAD
structures structur structure
( ( (
if if if
the the the
header header header
was was be
a a a
BITMAPINFOHEADER bitmapinfohead BITMAPINFOHEADER
) ) )
or or or
Windows window Windows
RGBTRIPLE rgbtripl RGBTRIPLE
structures structur structure
( ( (
if if if
the the the
header header header
was was be
a a a
BITMAPCOREHEADER bitmapcorehead BITMAPCOREHEADER
) ) )
. . .
3 3 3
. . .
The the The
image imag image
data data data
itself itself itself
. . .
CREATING creat CREATING
DIB dib DIB
IMAGE imag IMAGE
FILES file FILES
. . .
Creating creat Creating
a a a
DOS dos DOS
DIB dib DIB
image imag image
file file file
consists consist consist
of of of
several sever several
straight straight straight
forward forward forward
steps step step
. . .
The the The
headers header header
need need need
to to to
be be be
created creat create
and and and
then then then
written written write
to to to
the the the
file file file
. . .
These these These
header header header
structures structur structure
are are be
defined defin define
in in in
the the the
MS ms MS
Windows window Windows
/ / /
3 3 3
. . .
0 0 0
" " "
windows window window
. . .
h h h
" " "
include includ include
file file file
. . .
Palette palett Palette
information inform information
needs need need
to to to
be be be
stored store store
for for for
images imag image
that that that
are are be
not not not
24 24 24
- - -
bit bit bit
images imag image
. . .
The the The
five five five
general general general
steps step step
are are be
: : :
1 1 1
. . .
Filling fill Filling
in in in
the the the
BITMAPFILEHEADER bitmapfilehead BITMAPFILEHEADER
and and and
the the the
BITMAPINFOHEADER bitmapinfohead BITMAPINFOHEADER
structures structur structure
the the the
basic basic basic
image imag image
information inform information
. . .
2 2 2
. . .
If if If
the the the
image imag image
is is be
a a a
1 1 1
- - -
bit bit bit
, , ,
4 4 4
- - -
bit bit bit
, , ,
or or or
an an an
8 8 8
- - -
bit bit bit
image imag image
, , ,
creating creat create
the the the
color color color
palette palett palette
of of of
RGBQUADS rgbquad RGBQUADS
. . .
3 3 3
. . .
Calculating calcul Calculating
the the the
total total total
file file file
size size size
and and and
putting put put
this this this
information inform information
in in in
March march March
15 15 15
, , ,
1991 1991 1991
- - -
4 4 4
- - -
the the the
" " "
bfSize bfsize bfSize
" " "
field field field
of of of
the the the
BITMAPFILEHEADER bitmapfilehead BITMAPFILEHEADER
. . .
4 4 4
. . .
Calculating calcul Calculating
the the the
offset offset offset
to to to
the the the
image imag image
data data data
from from from
the the the
start start start
of of of
the the the
file file file
, , ,
and and and
putting put put
this this this
in in in
the the the
" " "
bfOffBits bfoffbit bfOffBits
" " "
field field field
of of of
the the the
BITMAPFILEHEADER bitmapfilehead BITMAPFILEHEADER
. . .
5 5 5
. . .
Writing write Writing
to to to
the the the
file file file
the the the
BITMAPFILEHEADER bitmapfilehead BITMAPFILEHEADER
, , ,
the the the
BITMAPINFOHEADER bitmapinfohead BITMAPINFOHEADER
, , ,
the the the
color color color
palette palett palette
, , ,
and and and
the the the
image imag image
data data data
( ( (
in in in
that that that
order order order
) ) )
. . .
The the The
following follow following
sections section section
describe describ describe
structures structur structure
in in in
terms term term
of of of
MicroSoft microsoft MicroSoft
C c C
type type type
- - -
defined defin define
keywords keyword keywords
. . .
The the The
following follow follow
table tabl table
describes describ describes
these these these
keywords keyword keywords
for for for
those those those
not not not
familiar familiar familiar
with with with
MicroSoft microsoft MicroSoft
C c C
. . .
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
| | |
| | |
| | |
Type type Type
- - -
defined defin define
keywords keyword keywords
in in in
MicroSoft microsoft MicroSoft
C c C
. . .
| | |
| | |
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
| | |
| | |
typedef typedef typedef
| | |
meaning mean meaning
| | |
| | |
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
| | |
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
| | |
| | |
BYTE byte BYTE
| | |
unsigned unsign unsigned
character charact character
| | |
| | |
WORD word WORD
| | |
two two two
byte byte byte
unsigned unsign unsigned
integer integ integer
| | |
| | |
DWORD dword DWORD
| | |
four four four
byte byte byte
unsigned unsign unsigned
integer integ integer
| | |
| | |
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
| | |
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
_ _ _
| | |
March march March
15 15 15
, , ,
1991 1991 1991
- - -
5 5 5
- - -
THE the THE
BITMAPFILEHEADER bitmapfilehead BITMAPFILEHEADER
This this This
structure structur structure
is is be
defined defin define
in in in
" " "
windows window window
. . .
h h h
" " "
as as a
: : :
typedef typedef typedef
struct struct struct
tagBITMAPFILEHEADER tagbitmapfilehead tagBITMAPFILEHEADER
{ { {
WORD word WORD
bfType bftype bfType
; ; ;
DWORD dword DWORD
bfSize bfsize bfSize
; ; ;
WORD word WORD
bfReserved bfreserv bfReserved
1 1 1
; ; ;
WORD word WORD
bfReserved bfreserv bfReserved
2 2 2
; ; ;
DWORD dword DWORD
bfOffBits bfoffbit bfOffBits
; ; ;
} } }
BITMAPFILEHEADER bitmapfilehead BITMAPFILEHEADER
; ; ;
The the The
" " "
bfType bftype bfType
" " "
field field field
is is be
the the the
two two two
ascii ascii ascii
characters charact character
' ' '
B b B
' ' '
and and and
' ' '
M m M
' ' '
. . .
This this This
serves serv serve
to to to
identify identifi identify
the the the
file file file
as as a
a a a
DIB dib DIB
image imag image
file file file
. . .
On on On
an an an
intel intel intel
byte byte byte
ordered order order
machine machin machine
( ( (
IBM ibm IBM
or or or
a a a
compatible compat compatible
) ) )
, , ,
this this this
constant constant constant
can can can
be be be
formed form form
in in in
C c C
as as a
the the the
quantity quantiti quantity
( ( (
' ' '
M m M
' ' '
< < <
< < <
8 8 8
| | |
' ' '
B b B
' ' '
) ) )
= = =
= = =
0 0 0
x x x
4 4 4
d d d
42 42 42
on on on
an an an
intel intel intel
system system system
. . .
The the The
" " "
bfSize bfsize bfSize
" " "
field field field
is is be
the the the
total total total
size size size
of of of
the the the
file file file
. . .
For for For
our our our
purposes purpos purpose
this this this
field field field
is is be
equal equal equal
to to to
: : :
the the the
size size size
of of of
the the the
BITMAPFILEHEADER bitmapfilehead BITMAPFILEHEADER
, , ,
plus plus plus
the the the
size size size
of of of
the the the
BITMAPINFOHEADER bitmapinfohead BITMAPINFOHEADER
, , ,
plus plus plus
the the the
number number number
of of of
entries entri entry
in in in
the the the
color color color
palette palett palette
times time time
the the the
size size size
of of of
a a a
RGBQUAD rgbquad RGBQUAD
, , ,
plus plus plus
the the the
number number number
of of of
bytes byte byte
of of of
image imag image
data data data
. . .
If if If
the the the
image imag image
data data data
is is be
being be be
written written write
out out out
in in in
an an an
uncompressed uncompress uncompressed
form form form
, , ,
this this this
value valu value
can can can
be be be
calculated calcul calculate
ahead ahead ahead
of of of
time time time
. . .
Otherwise otherwis Otherwise
, , ,
this this this
field field field
needs need need
to to to
be be be
filled fill fill
in in in
later later later
. . .
Both both Both
the the the
" " "
bfReserved bfreserv bfReserved
1 1 1
" " "
and and and
the the the
" " "
bfReserved bfreserv bfReserved
2 2 2
" " "
fields field field
are are be
always alway always
set set set
to to to
zero zero zero
. . .
The the The
" " "
bfOffBits bfoffbit bfOffBits
" " "
field field field
is is be
set set set
to to to
the the the
offset offset offset
to to to
the the the
start start start
of of of
the the the
image imag image
data data data
from from from
the the the
start start start
of of of
the the the
file file file
. . .
For for For
our our our
purposes purpos purpose
, , ,
this this this
field field field
should should should
be be be
set set set
to to to
: : :
the the the
size size size
of of of
the the the
BITMAPFILEHEADER bitmapfilehead BITMAPFILEHEADER
, , ,
plus plus plus
the the the
size size size
of of of
the the the
BITMAPINFOHEADER bitmapinfohead BITMAPINFOHEADER
, , ,
plus plus plus
the the the
number number number
of of of
entries entri entry
in in in
the the the
color color color
palette palett palette
times time time
the the the
size size size
of of of
a a a
RGBQUAD rgbquad RGBQUAD
. . .
This this This
works work work
out out out
because becaus because
the the the
image imag image
data data data
is is be
written written write
write write write
after after after
the the the
color color color
palette palett palette
if if if
one one one
exists exist exist
. . .
March march March
15 15 15
, , ,
1991 1991 1991
- - -
6 6 6
- - -
THE the THE
BITMAPINFOHEADER bitmapinfohead BITMAPINFOHEADER
This this This
structure structur structure
is is be
defined defin define
in in in
" " "
windows window window
. . .
h h h
" " "
as as a
: : :
typedef typedef typedef
struct struct struct
tagBITMAPINFOHEADER tagbitmapinfohead tagBITMAPINFOHEADER
{ { {
DWORD dword DWORD
biSize bisiz biSize
; ; ;
DWORD dword DWORD
biWidth biwidth biWidth
; ; ;
DWORD dword DWORD
biHeight biheight biHeight
; ; ;
WORD word WORD
biPlanes biplan biPlanes
; ; ;
WORD word WORD
biBitCount bibitcount biBitCount
; ; ;
DWORD dword DWORD
biCompression bicompress biCompression
; ; ;
DWORD dword DWORD
biSizeImage bisizeimag biSizeImage
; ; ;
DWORD dword DWORD
biXPelsPerMeter bixpelspermet biXPelsPerMeter
; ; ;
DWORD dword DWORD
biYPelsPerMeter biypelspermet biYPelsPerMeter
; ; ;
DWORD dword DWORD
biClrUsed biclrus biClrUsed
; ; ;
DWORD dword DWORD
biClrImportant biclrimport biClrImportant
; ; ;
} } }
BITMAPINFOHEADER bitmapinfohead BITMAPINFOHEADER
; ; ;
The the The
" " "
biSize bisiz biSize
" " "
field field field
is is be
set set set
to to to
the the the
size size size
of of of
the the the
BITMAPINFOHEADER bitmapinfohead BITMAPINFOHEADER
structure structur structure
itself itself itself
. . .
When when When
reading read read
the the the
image imag image
file file file
, , ,
this this this
value valu value
is is be
what what what
is is be
used use use
to to to
determine determin determine
that that that
the the the
image imag image
contains contain contain
a a a
BITMAPINFOHEADER bitmapinfohead BITMAPINFOHEADER
and and and
not not not
a a a
BITMAPCOREHEADER bitmapcorehead BITMAPCOREHEADER
. . .
The the The
" " "
biWidth biwidth biWidth
" " "
field field field
is is be
the the the
width width width
of of of
the the the
image imag image
in in in
image imag image
pixels pixel pixel
. . .
The the The
" " "
biHeight biheight biHeight
" " "
field field field
is is be
the the the
height height height
of of of
the the the
image imag image
in in in
image imag image
lines line line
. . .
The the The
" " "
biPlanes biplan biPlanes
" " "
field field field
should should should
always alway always
be be be
set set set
to to to
1 1 1
. . .
This this This
data data data
is is be
written written write
out out out
as as a
if if if
there there there
was was be
one one one
color color color
plane plane plane
. . .
The the The
" " "
biBitCount bibitcount biBitCount
" " "
field field field
is is be
the the the
bit bit bit
- - -
depth depth depth
of of of
the the the
image imag image
. . .
This this This
must must must
be be be
either either either
1 1 1
, , ,
4 4 4
, , ,
8 8 8
, , ,
or or or
24 24 24
, , ,
depending depend depend
on on on
the the the
bit bit bit
- - -
depth depth depth
of of of
the the the
image imag image
data data data
. . .
The the The
" " "
biCompression bicompress biCompression
" " "
field field field
tells tell tell
how how how
the the the
image imag image
data data data
is is be
compressed compress compress
if if if
it it it
is is be
compressed compress compress
. . .
DIB dib DIB
images imag image
support support support
two two two
forms form form
of of of
run run run
- - -
length length length
encoding encod encoding
. . .
However howev However
, , ,
I i I
have have have
never never never
seen seen see
any ani any
images imag image
which which which
use use use
it it it
, , ,
and and and
don don don
' ' '
t t t
know know know
yet yet yet
how how how
it it it
works work work
. . .
Set set Set
this this this
field field field
to to to
zero zero zero
( ( (
long long long
zero zero zero
, , ,
or or or
0 0 0
L l L
) ) )
, , ,
to to to
indicate indic indicate
that that that
the the the
data data data
is is be
not not not
compressed compress compress
. . .
All all All
subsequent subsequ subsequent
fields field field
of of of
the the the
BITMAPINFOHEADER bitmapinfohead BITMAPINFOHEADER
structure structur structure
may may may
be be be
set set set
to to to
zero zero zero
. . .
A a A
requirement requir requirement
of of of
the the the
interpretting interpret interpretting
software softwar software
that that that
it it it
be be be
able abl able
to to to
compute comput compute
these these these
fields field field
as as a
necessary necessari necessary
from from from
the the the
previous previous previous
information inform information
. . .
The the The
field field field
which which which
you you you
might might might
want want want
to to to
explicitly explicit explicitly
specify specifi specify
might might might
be be be
" " "
biClrUsed biclrus biClrUsed
" " "
. . .
For for For
4 4 4
- - -
bit bit bit
and and and
8 8 8
- - -
bit bit bit
images imag image
this this this
field field field
indicates indic indicate
that that that
not not not
all all all
of of of
the the the
possible possibl possible
color color color
entries entri entry
are are be
used use use
and and and
that that that
the the the
image imag image
contains contain contain
" " "
biClrUsed biclrus biClrUsed
" " "
colors color color
. . .
If if If
you you you
are are be
using use use
only onli only
32 32 32
colors color color
with with with
an an an
8 8 8
- - -
bit bit bit
image imag image
, , ,
then then then
you you you
may may may
only onli only
want want want
to to to
save save save
32 32 32
of of of
the the the
possible possibl possible
256 256 256
palette palett palette
entries entri entry
. . .
Generally general Generally
, , ,
set set set
this this this
field field field
to to to
zero zero zero
. . .
March march March
15 15 15
, , ,
1991 1991 1991
- - -
7 7 7
- - -
COLOR color COLOR
PALETTES palett PALETTES
Each each Each
entry entri entry
of of of
a a a
color color color
palette palett palette
is is be
a a a
RGBQUAD rgbquad RGBQUAD
structure structur structure
. . .
The the The
RGBQUAD rgbquad RGBQUAD
structure structur structure
is is be
defined defin define
in in in
the the the
" " "
windows window windows
. . .
h h h
" " "
include includ include
file file file
as as a
: : :
typedef typedef typedef
struct struct struct
tagRGBQUAD tagrgbquad tagRGBQUAD
{ { {
BYTE byte BYTE
rgbBlue rgbblue rgbBlue
; ; ;
BYTE byte BYTE
rgbGreen rgbgreen rgbGreen
; ; ;
BYTE byte BYTE
rgbRed rgbred rgbRed
; ; ;
BYTE byte BYTE
rgbReserved rgbreserv rgbReserved
; ; ;
} } }
RGBQUAD rgbquad RGBQUAD
; ; ;
The the The
" " "
rgbReserved rgbreserv rgbReserved
" " "
field field field
is is be
always alway always
zero zero zero
. . .
For for For
each each each
color color color
used use use
, , ,
the the the
amount amount amount
of of of
Blue blue Blue
, , ,
Green green Green
, , ,
and and and
Red red Red
are are be
filled fill fill
into into into
the the the
structure structur structure
and and and
the the the
structure structur structure
is is be
written written write
to to to
the the the
file file file
. . .
A a A
value valu value
of of of
zero zero zero
in in in
the the the
" " "
rgbBlue rgbblue rgbBlue
" " "
, , ,
" " "
rgbGreen rgbgreen rgbGreen
" " "
, , ,
or or or
" " "
rgbRed rgbred rgbRed
" " "
fields field field
indicates indic indicate
that that that
that that that
particular particular particular
component compon component
does doe do
not not not
contribute contribut contribute
to to to
the the the
color color color
composition composit composition
. . .
A a A
value valu value
of of of
255 255 255
in in in
any ani any
of of of
these these these
fields field field
indicates indic indicate
that that that
the the the
component compon component
contributes contribut contribute
fully fulli fully
to to to
the the the
color color color
composition composit composition
. . .
IMAGE imag IMAGE
DATA data DATA
There there There
are are be
three three three
surprises surpris surprise
about about about
the the the
ordering order ordering
of of of
image imag image
data data data
in in in
DIB dib DIB
image imag image
file file file
. . .
The the The
creator creator creator
of of of
this this this
format format format
was was be
determined determin determine
to to to
be be be
creative creativ creative
, , ,
and and and
certainly certain certainly
was was be
. . .
Within within Within
the the the
image imag image
data data data
, , ,
each each each
line line line
written written write
out out out
is is be
padded pad pad
to to to
the the the
next next next
four four four
byte byte byte
quantity quantiti quantity
. . .
So so So
, , ,
if if if
you you you
had had have
an an an
8 8 8
- - -
bit bit bit
image imag image
which which which
was was be
only onli only
one one one
pixel pixel pixel
wide wide wide
, , ,
you you you
still still still
have have have
to to to
write write write
out out out
four four four
bytes byte byte
for for for
every everi every
image imag image
line line line
. . .
The the The
number number number
of of of
bytes byte byte
per per per
line line line
can can can
be be be
calculated calcul calculate
as as a
: : :
bytes byte byte
_ _ _
per per per
_ _ _
line line line
= = =
( ( (
width width width
_ _ _
in in in
_ _ _
pix pix pix
* * *
bit bit bit
_ _ _
depth depth depth
+ + +
31 31 31
) ) )
/ / /
32 32 32
* * *
4 4 4
; ; ;
- - -
- - -
- - -
or or or
, , ,
in in in
terms term term
of of of
the the the
fields field field
of of of
the the the
BITMAPINFOHEADER bitmapinfohead BITMAPINFOHEADER
structure structur structure
- - -
- - -
- - -
bytes byte byte
_ _ _
per per per
_ _ _
line line line
= = =
( ( (
biWidth biwidth biWidth
* * *
biBitCount bibitcount biBitCount
+ + +
31 31 31
) ) )
/ / /
32 32 32
* * *
4 4 4
; ; ;
When when When
writing write write
out out out
your your your
image imag image
data data data
, , ,
you you you
must must must
write write write
it it it
out out out
bottom bottom bottom
line line line
first first first
. . .
The the The
bottom bottom bottom
line line line
of of of
the the the
image imag image
as as a
you you you
would would would
look look look
at at at
it it it
on on on
the the the
screen screen screen
is is be
the the the
first first first
line line line
of of of
image imag image
data data data
in in in
the the the
file file file
. . .
For for For
1 1 1
- - -
bit bit bit
, , ,
4 4 4
- - -
bit bit bit
, , ,
and and and
8 8 8
- - -
bit bit bit
images imag image
, , ,
information inform information
is is be
written written write
as as a
you you you
would would would
expect expect expect
. . .
One one One
bit bit bit
images imag image
are are be
padded pad pad
eight eight eight
pixels pixel pixel
to to to
a a a
byte byte byte
. . .
Four four Four
bit bit bit
images imag image
are are be
padded pad pad
two two two
pixels pixel pixel
to to to
a a a
byte byte byte
. . .
Eight eight Eight
bit bit bit
images imag image
are are be
written written write
one one one
pixel pixel pixel
per per per
byte byte byte
. . .
Twenty twenti Twenty
- - -
four four four
bit bit bit
images imag image
are are be
written written write
three three three
bytes byte byte
per per per
pixel pixel pixel
. . .
However howev However
, , ,
for for for
24 24 24
- - -
bit bit bit
images imag image
the the the
information inform information
must must must
be be be
written written write
out out out
in in in
the the the
order order order
blue blue blue
, , ,
green green green
, , ,
red red red
. . .
While while While
most most most
image imag image
file file file
formats format format
write write write
data data data
out out out
in in in
March march March
15 15 15
, , ,
1991 1991 1991
- - -
8 8 8
- - -
an an an
" " "
RGB rgb RGB
" " "
ordering order ordering
, , ,
a a a
DIB dib DIB
image imag image
file file file
writes write write
the the the
data data data
out out out
in in in
an an an
" " "
BGR bgr BGR
" " "
ordering order order
. . .
SUMMARY summari SUMMARY
This this This
should should should
provide provid provide
enough enough enough
information inform information
to to to
create creat create
DIB dib DIB
images imag image
from from from
applications applic application
such such such
as as a
scanners scanner scanner
or or or
for for for
image imag image
exporting export export
routines routin routine
. . .
If if If
you you you
find find find
out out out
any ani any
more more more
about about about
DIB dib DIB
images imag image
, , ,
please pleas please
pass pass pass
the the the
information inform information
on on on
to to to
me me me
so so so
that that that
I i I
can can can
modify modifi modify
this this this
document document document
accordingly accord accordingly
. . .
March march March
15 15 15
, , ,
1991 1991 1991
- - -
- - -
Thomas thoma Thomas
B b B
. . .
Kinsman kinsman Kinsman
, , ,
Rochester rochest Rochester
, , ,
NY ny NY
, , ,
thomas thoma thomas
@ @ @
acadia acadia acadia
. . .
kodak kodak kodak
. . .
com com com
" " "
Practice practic Practice
random random random
kindness kind kindness
and and and
senseless senseless senseless
acts act act
of of of
beauty beauti beauty
. . .
" " "
- - -
anon anon anon
- - -
- - -
ITO ito ITO
Takayuki takayuki Takayuki
< < <
yuki yuki yuki
@ @ @
is is be
. . .
s s s
. . .
u u u
- - -
tokyo tokyo tokyo
. . .
ac ac ac
. . .
jp jp jp
> > >
Senior senior Senior
, , ,
Department depart Department
of of of
Infomation infom Infomation
Science scienc Science
, , ,
Faculty faculti Faculty
of of of
Science scienc Science
, , ,
University univers University
of of of
Tokyo tokyo Tokyo
, , ,
JAPAN japan JAPAN
. . .
