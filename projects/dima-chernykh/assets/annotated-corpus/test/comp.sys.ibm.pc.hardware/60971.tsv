From from From
: : :
jliukkon jliukkon jliukkon
@ @ @
klaava klaava klaava
. . .
Helsinki helsinki Helsinki
. . .
FI fi FI
( ( (
Juha juha Juha
- - -
Matti matti Matti
Liukkonen liukkonen Liukkonen
) ) )
Subject subject Subject
: : :
Re re Re
: : :
Soundblaster soundblast Soundblaster
IRQ irq IRQ
and and and
Port port Port
settings set setting
Organization organ Organization
: : :
University univers University
of of of
Helsinki helsinki Helsinki
Lines line Lines
: : :
52 52 52
pdb pdb pdb
059 059 059
@ @ @
ipl ipl ipl
. . .
jpl jpl jpl
. . .
nasa nasa nasa
. . .
gov gov gov
( ( (
Paul paul Paul
Bartholomew bartholomew Bartholomew
) ) )
writes write write
: : :
< < <
clip clip clip
clip clip clip
> > >
> > >
Interesting interest Interesting
. . .
Would would Would
you you you
care care care
to to to
explain explain explain
to to to
me me me
then then then
, , ,
how how how
my my my
SoundBlaster soundblast SoundBlaster
> > >
Pro pro Pro
card card card
and and and
my my my
printer printer printer
card card card
are are be
sharing share share
IRQ irq IRQ
7 7 7
successfully success successfully
? ? ?
I i I
assure assur assure
> > >
you you you
that that that
they they they
are are be
both both both
set set set
to to to
IRQ irq IRQ
7 7 7
and and and
that that that
I i I
have have have
no no no
problem problem problem
. . .
My my My
> > >
computer comput computer
is is be
a a a
DTK dtk DTK
286 286 286
- - -
12 12 12
IBM ibm IBM
clone clone clone
. . .
Running run Running
MS ms MS
- - -
DOS dos DOS
or or or
a a a
derivative deriv derivative
OS os OS
, , ,
obviously obvious obviously
. . .
Please pleas Please
take take take
note note note
that that that
the the the
following follow following
is is be
not not not
what what what
exactly exact exactly
happens happen happen
, , ,
but but but
a a a
slightly slight slightly
simplified simplifi simplify
explanation explan explanation
. . .
Technically technic Technically
, , ,
the the the
IRQ irq IRQ
line line line
is is be
only onli only
a a a
means mean mean
for for for
the the the
device devic device
( ( (
printer printer printer
adapter adapt adapter
, , ,
SoundBlaster soundblast SoundBlaster
, , ,
modem modem modem
, , ,
hard hard hard
disk disk disk
, , ,
. . .
. . .
. . .
) ) )
to to to
signal signal signal
the the the
CPU cpu CPU
that that that
" " "
Something someth Something
' ' '
s s s
happening happen happen
here here here
, , ,
please pleas please
take take take
note note note
. . .
" " "
How how How
the the the
CPU cpu CPU
is is be
programmed program program
to to to
handle handl handle
this this this
signal signal signal
is is be
usually usual usually
up up up
to to to
the the the
operating oper operating
system system system
. . .
In in In
MS ms MS
- - -
DOS dos DOS
, , ,
the the the
" " "
interrupt interrupt interrupt
vector vector vector
" " "
is is be
used use use
to to to
store store store
the the the
address address address
of of of
the the the
function function function
that that that
handles handl handle
each each each
interrupt interrupt interrupt
. . .
Now now Now
, , ,
basic basic basic
DOS dos DOS
doesn doesn doesn
' ' '
t t t
care care care
whether whether whether
the the the
printer printer printer
reports report report
that that that
it it it
' ' '
s s s
ready readi ready
to to to
print print print
some some some
more more more
stuff stuff stuff
or or or
not not not
- - -
it it it
simply simpli simply
ignores ignor ignore
the the the
interrupt interrupt interrupt
. . .
When when When
DOS dos DOS
prints print print
, , ,
it it it
looks look look
at at at
the the the
LPT lpt LPT
buffer buffer buffer
. . .
If if If
there there there
' ' '
s s s
a a a
character charact character
there there there
, , ,
wait wait wait
a a a
while while while
and and and
check check check
again again again
. . .
If if If
there there there
' ' '
s s s
not not not
, , ,
copy copi copy
a a a
new new new
character charact character
to to to
the the the
LPT lpt LPT
port port port
. . .
Since sinc Since
the the the
IRQ irq IRQ
7 7 7
is is be
ignored ignor ignore
as as a
a a a
printer printer printer
interrupt interrupt interrupt
, , ,
it it it
' ' '
s s s
free free free
for for for
use use use
for for for
any ani any
other other other
adapters adapt adapter
- - -
in in in
this this this
case case case
, , ,
the the the
SB sb SB
. . .
With with With
any ani any
multitasking multitask multitasking
or or or
otherwise otherwis otherwise
advanced advanc advanced
OS os OS
, , ,
this this this
kind kind kind
of of of
printing print print
approach approach approach
just just just
doesn doesn doesn
' ' '
t t t
work work work
( ( (
or or or
more more more
precisely precis precisely
, , ,
it it it
wastes wast waste
a a a
lot lot lot
of of of
CPU cpu CPU
cycles cycl cycle
. . .
) ) )
Hence henc Hence
, , ,
you you you
can can can
' ' '
t t t
" " "
share share share
" " "
the the the
IRQ irq IRQ
7 7 7
with with with
LPT lpt LPT
1 1 1
and and and
SB sb SB
if if if
you you you
' ' '
re re re
running run run
Unix unix Unix
or or or
OS os OS
/ / /
2 2 2
or or or
whatnot whatnot whatnot
. . .
Another anoth Another
issue issu issue
with with with
the the the
SB sb SB
is is be
that that that
only onli only
the the the
digitized digit digitize
sound sound sound
uses use use
interrupts interrupt interrupt
. . .
When when When
the the the
SB sb SB
plays play play
plain plain plain
music music music
, , ,
the the the
CPU cpu CPU
simply simpli simply
tells tell tell
it it it
what what what
to to to
play play play
until until until
told told told
otherwise otherwis otherwise
. . .
With with With
digitized digit digitized
sound sound sound
the the the
interrupt interrupt interrupt
is is be
required requir require
to to to
notify notifi notify
the the the
CPU cpu CPU
when when when
the the the
output output output
ends end end
and and and
new new new
data data data
is is be
needed need need
. . .
You you You
can can can
, , ,
however howev however
, , ,
hook hook hook
two two two
( ( (
or or or
more more more
) ) )
COM com COM
ports port port
to to to
one one one
interrupt interrupt interrupt
, , ,
but but but
use use use
them them them
only onli only
one one one
at at at
a a a
time time time
. . .
This this This
is is be
because becaus because
the the the
interrupt interrupt interrupt
handling handl handling
routine routin routine
is is be
same same same
for for for
both both both
ports port port
, , ,
and and and
it it it
can can can
see see see
from from from
which which which
port port port
the the the
data data data
came came come
from from from
. . .
This this This
, , ,
of of of
course cours course
, , ,
applies appli applies
for for for
some some some
other other other
devices devic device
( ( (
like like like
LPT lpt LPT
) ) )
as as as
well well well
. . .
Remember rememb Remember
, , ,
this this this
was was be
greatly great greatly
simplified simplifi simplify
in in in
parts part part
, , ,
but but but
I i I
think think think
gives give give
the the the
general general general
picture pictur picture
correctly correct correctly
enough enough enough
. . .
Cheers cheer Cheers
, , ,
- - -
- - -
Juha juha Juha
Liukkonen liukkonen Liukkonen
, , ,
aka aka aka
jliukkon jliukkon jliukkon
@ @ @
cc cc cc
. . .
helsinki helsinki helsinki
. . .
fi fi fi
University univers University
of of of
Helsinki helsinki Helsinki
, , ,
Dept dept Dept
. . .
of of of
Lost lost Lost
Souls soul Souls
" " "
Trust trust Trust
me me me
, , ,
I i I
know know know
what what what
I i I
' ' '
m m m
doing do do
. . .
" " "
- - -
Sledge sledg Sledge
Hammer hammer Hammer
