From from From
: : :
probert probert probert
@ @ @
ucsb ucsb ucsb
. . .
edu edu edu
( ( (
Dave dave Dave
Probert probert Probert
) ) )
Subject subject Subject
: : :
image imag image
data data data
format format format
question question question
Organization organ Organization
: : :
University univers University
of of of
California california California
, , ,
Santa santa Santa
Barbara barbara Barbara
Lines line Lines
: : :
63 63 63
* * *
* * *
I i I
am am be
posting post post
this this this
for for for
a a a
friend friend friend
* * *
* * *
* * *
* * *
please pleas please
respond respond respond
to to to
vaughn vaughn vaughn
% % %
sonatech sonatech sonatech
@ @ @
hub hub hub
. . .
ucsb ucsb ucsb
. . .
edu edu edu
* * *
* * *
I i I
' ' '
m m m
working work work
on on on
an an an
application applic application
where where where
we we we
are are be
creating creat create
a a a
dither dither dither
pattern pattern pattern
and and and
rendering render render
it it it
in in in
a a a
window window window
by by by
applying appli apply
it it it
to to to
the the the
stipple stippl stipple
pattern pattern pattern
of of of
the the the
GC gc GC
. . .
The the The
following follow following
code code code
segment segment segment
almost almost almost
works work work
if if if
the the the
window window window
width width width
is is be
an an an
even even even
multiple multipl multiple
of of of
8 8 8
. . .
If if If
it it it
is is be
not not not
an an an
even even even
multiple multipl multiple
it it it
skews skew skew
the the the
pattern pattern pattern
towards toward towards
the the the
right right right
. . .
Another anoth Another
problem problem problem
, , ,
whether whether whether
it it it
is is be
an an an
even even even
multiple multipl multiple
of of of
8 8 8
or or or
not not not
, , ,
is is be
a a a
series seri series
of of of
vertical vertic vertical
lines line line
spaced space space
8 8 8
pixels pixel pixel
apart apart apart
. . .
extern extern extern
Display display Display
* * *
dpy dpi dpy
; ; ;
extern extern extern
Window window Window
xid xid xid
; ; ;
extern extern extern
GC gc GC
gc gc gc
; ; ;
extern extern extern
int int int
Max max Max
_ _ _
X x X
, , ,
Max max Max
_ _ _
Y y Y
; ; ;
/ / /
* * *
set set set
in in in
resize resiz resize
handler handler handler
* * *
/ / /
dither dither dither
( ( (
pixels pixel pixel
) ) )
char char char
* * *
pixels pixel pixel
; ; ;
/ / /
* * *
dither dither dither
pattern pattern pattern
data data data
* * *
/ / /
{ { {
char char char
* * *
bm bm bm
; ; ;
/ / /
* * *
bitmap bitmap bitmap
data data data
* * *
/ / /
char char char
* * *
bmp bmp bmp
; ; ;
long long long
I i I
, , ,
arraymax arraymax arraymax
; ; ;
arraymax arraymax arraymax
= = =
Max max Max
_ _ _
X x X
* * *
Max max Max
_ _ _
Y y Y
; ; ;
bm bm bm
= = =
( ( (
char char char
* * *
) ) )
malloc malloc malloc
( ( (
arraymax arraymax arraymax
) ) )
; ; ;
bmp bmp bmp
= = =
bm bm bm
; ; ;
for for for
( ( (
I i I
= = =
j j j
= = =
0 0 0
; ; ;
I i I
< < <
arraymax arraymax arraymax
; ; ;
I i I
+ + +
+ + +
) ) )
{ { {
if if if
( ( (
pixels pixel pixels
[ [ [
I i I
] ] ]
& & &
DITHER dither DITHER
_ _ _
BIT bit BIT
) ) )
* * *
bmp bmp bmp
| | |
= = =
2 2 2
< < <
< < <
j j j
; ; ;
/ / /
* * *
pixel pixel pixel
on on on
* * *
/ / /
else els else
* * *
bmp bmp bmp
& & &
= = =
~ ~ ~
( ( (
2 2 2
< < <
< < <
j j j
) ) )
; ; ;
/ / /
* * *
pixel pixel pixel
off off off
* * *
/ / /
if if if
( ( (
+ + +
+ + +
j j j
> > >
7 7 7
) ) )
{ { {
bmp bmp bmp
+ + +
+ + +
; ; ;
j j j
= = =
0 0 0
; ; ;
} } }
} } }
stipple stippl stipple
= = =
XCreateBitmapFromData xcreatebitmapfromdata XCreateBitmapFromData
( ( (
dpy dpi dpy
, , ,
xid xid xid
, , ,
bm bm bm
, , ,
Max max Max
_ _ _
X x X
, , ,
Max max Max
_ _ _
Y y Y
) ) )
; ; ;
free free free
( ( (
bm bm bm
) ) )
; ; ;
XClearWindow xclearwindow XClearWindow
( ( (
dpy dpi dpy
, , ,
xid xid xid
) ) )
; ; ;
XSetStipple xsetstippl XSetStipple
( ( (
dpy dpi dpy
, , ,
gc gc gc
, , ,
stipple stippl stipple
) ) )
; ; ;
XSetFillStyle xsetfillstyl XSetFillStyle
( ( (
dpy dpi dpy
, , ,
gc gc gc
, , ,
FillStippled fillstippl FillStippled
) ) )
; ; ;
XFillRectangle xfillrectangl XFillRectangle
( ( (
dpy dpi dpy
, , ,
xid xid xid
, , ,
gc gc gc
, , ,
0 0 0
, , ,
0 0 0
, , ,
Max max Max
_ _ _
X x X
, , ,
Max max Max
_ _ _
Y y Y
) ) )
; ; ;
XSetFillStyle xsetfillstyl XSetFillStyle
( ( (
dpy dpi dpy
, , ,
gc gc gc
, , ,
FillSolid fillsolid FillSolid
) ) )
; ; ;
} } }
I i I
suspect suspect suspect
the the the
answer answer answer
is is be
to to to
pad pad pad
the the the
data data data
. . .
- - -
- - -
Mike mike Mike
Vaughn vaughn Vaughn
Sonatech sonatech Sonatech
