From from From
: : :
oj oj oj
@ @ @
world world world
. . .
std std std
. . .
com com com
( ( (
Oliver oliv Oliver
Jones jone Jones
) ) )
Subject subject Subject
: : :
Re re Re
: : :
XQueryTree xquerytre XQueryTree
, , ,
XGrabServer xgrabserv XGrabServer
, , ,
and and and
robustness robust robustness
Organization organ Organization
: : :
Shawsheen shawsheen Shawsheen
Software softwar Software
Lines line Lines
: : :
24 24 24
In in In
article articl article
< < <
1993 1993 1993
May may May
18 18 18
. . .
150655 150655 150655
. . .
23645 23645 23645
@ @ @
viewlogic viewlog viewlogic
. . .
com com com
> > >
josh josh josh
@ @ @
viewlogic viewlog viewlogic
. . .
com com com
( ( (
Josh josh Josh
Marantz marantz Marantz
) ) )
writes write write
: : :
> > >
I i I
have have have
an an an
application applic application
that that that
wants want want
to to to
walk walk walk
the the the
server server server
window window window
hierarchy hierarchi hierarchy
, , ,
> > >
looking look look
for for for
a a a
window window window
with with with
a a a
specific specif specific
property properti property
. . .
> > >
I i I
think think think
what what what
happens happen happen
is is be
that that that
XQueryTree xquerytre XQueryTree
gives give give
me me me
an an an
array array array
of of of
n n n
> > >
children children child
, , ,
but but but
by by by
the the the
time time time
I i I
get get get
to to to
the the the
nth nth nth
child child child
window window window
, , ,
it it it
has has have
been been be
> > >
destroyed destroy destroy
. . .
Then then Then
I i I
get get get
a a a
BadWindow badwindow BadWindow
error error error
, , ,
and and and
my my my
application applic application
exits exit exit
. . .
> > >
> > >
How how How
can can can
I i I
make make make
this this this
robust robust robust
? ? ?
I i I
' ' '
ve ve ve
thought thought thought
of of of
the the the
following follow following
: : :
. . .
. . .
. . .
> > >
2 2 2
. . .
Set set Set
up up up
an an an
X x X
error error error
handler handler handler
that that that
longjmps longjmp longjmps
back back back
to to to
where where where
I i I
> > >
made made make
the the the
offending offend offend
call call call
. . .
Is is Is
this this this
safe safe safe
? ? ?
Do do Do
I i I
have have have
to to to
> > >
longjmp longjmp longjmp
, , ,
or or or
can can can
I i I
just just just
return return return
? ? ?
BadWindow badwindow BadWindow
is is be
an an an
X x X
protocol protocol protocol
error error error
. . .
If if If
you you you
write write write
a a a
custom custom custom
error error error
handler handler handler
which which which
does doe do
not not not
do do do
" " "
exit exit exit
( ( (
1 1 1
) ) )
; ; ;
" " "
the the the
error error error
handler handler handler
will will will
return return return
and and and
let let let
your your your
program program program
carry carri carry
on on on
. . .
So so So
, , ,
using use use
a a a
XSetErrorHandler xseterrorhandl XSetErrorHandler
is is be
the the the
way way way
to to to
go go go
, , ,
but but but
never never never
mind mind mind
the the the
longjmp longjmp longjmp
. . .
> > >
3 3 3
. . .
Register regist Register
for for for
DestroyNotify destroynotifi DestroyNotify
on on on
all all all
the the the
windows window window
returned return return
from from from
> > >
XQueryTree xquerytre XQueryTree
. . .
. . .
. . .
. . .
Too too Too
hard hard hard
. . .
. . .
. . .
. . .
