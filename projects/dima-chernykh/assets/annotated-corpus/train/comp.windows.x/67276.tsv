From from From
: : :
inoue inou inoue
@ @ @
crd crd crd
. . .
yokogawa yokogawa yokogawa
. . .
co co co
. . .
jp jp jp
( ( (
Inoue inou Inoue
Takeshi takeshi Takeshi
) ) )
Subject subject Subject
: : :
How how How
to to to
see see see
characterset characterset characterset
from from from
wchar wchar wchar
_ _ _
t t t
Nntp nntp Nntp
- - -
Posting post Posting
- - -
Host host Host
: : :
emu emu emu
Distribution distribut Distribution
: : :
comp comp comp
Organization organ Organization
: : :
Yokogawa yokogawa Yokogawa
Electric electr Electric
Corporation corpor Corporation
, , ,
Tokyo tokyo Tokyo
, , ,
Japan japan Japan
Lines line Lines
: : :
137 137 137
We we We
developed develop develop
a a a
toolkit toolkit toolkit
running run run
on on on
the the the
X x X
Window window Window
System system System
. . .
The the The
toolkit toolkit toolkit
copes cope cope
with with with
any ani any
languages languag language
based base base
on on on
X x X
11 11 11
R r R
5 5 5
' ' '
s s s
i i i
18 18 18
n n n
facility facil facility
. . .
As as As
you you you
know know know
, , ,
there there there
are are be
2 2 2
kinds kind kind
of of of
i i i
18 18 18
n n n
implementation implement implementation
from from from
MIT mit MIT
' ' '
s s s
X x X
11 11 11
R r R
5 5 5
release releas release
- - -
- - -
Xsi xsi Xsi
and and and
Ximp ximp Ximp
. . .
Our our Our
original origin original
implementation implement implementation
of of of
the the the
toolkit toolkit toolkit
uses use use
Xsi xsi Xsi
. . .
Our our Our
toolkit toolkit toolkit
manages manag manage
each each each
character charact character
' ' '
s s s
size size size
based base base
on on on
our our our
own own own
font font font
management manag management
system system system
. . .
In in In
order order order
to to to
do do do
that that that
, , ,
the the the
' ' '
wchar wchar wchar
_ _ _
t t t
' ' '
typed type typed
character charact character
strings string string
must must must
be be be
decomposed decompos decompose
to to to
character charact character
sets set set
. . .
This this This
means mean mean
that that that
if if if
one one one
wchar wchar wchar
_ _ _
t t t
type type type
compound compound compound
string string string
with with with
ASCII ascii ASCII
and and and
Kanji kanji Kanji
mixed mix mixed
, , ,
for for for
example exampl example
, , ,
is is be
given given give
, , ,
each each each
element element element
of of of
the the the
wchar wchar wchar
_ _ _
t t t
array array array
must must must
be be be
checked check check
its it it
corresponding correspond corresponding
character charact character
set set set
based base base
on on on
a a a
bit bit bit
layout layout layout
and and and
application applic application
environment environ environment
' ' '
s s s
locale local locale
. . .
In in In
this this this
case case case
if if if
the the the
locale local locale
is is be
' ' '
japanese japanes japanese
' ' '
, , ,
each each each
wchar wchar wchar
_ _ _
t t t
character charact character
will will will
be be be
classified classifi classify
either either either
to to to
iso iso iso
8859 8859 8859
- - -
1 1 1
, , ,
jisx jisx jisx
0208 0208 0208
or or or
so so so
. . .
We we We
need need need
a a a
function function function
to to to
do do do
this this this
. . .
The the The
function function function
must must must
check check check
how how how
many mani many
characters charact character
from from from
the the the
top top top
are are be
the the the
same same same
character charact character
set set set
and and and
what what what
the the the
character charact character
set set set
is is be
. . .
We we We
could could could
not not not
find find find
any ani any
public public public
X x X
11 11 11
R r R
5 5 5
function function function
to to to
do do do
that that that
and and and
inevitably inevit inevitably
, , ,
used use use
Xsi xsi Xsi
' ' '
s s s
internal intern internal
functions function function
to to to
construct construct construct
that that that
function function function
. . .
The the The
following follow following
is is be
the the the
source sourc source
code code code
of of of
that that that
function function function
' ' '
decomposeCharacterSet decomposecharacterset decomposeCharacterSet
( ( (
) ) )
' ' '
. . .
/ / /
/ / /
I i I
18 18 18
N n N
. . .
h h h
/ / /
/ / /
This this This
may may may
look look look
like like like
C c C
code code code
, , ,
but but but
it it it
is is be
really realli really
- - -
* * *
- - -
C c C
+ + +
+ + +
- - -
* * *
- - -
/ / /
/ / /
$ $ $
Id id Id
: : :
I i I
18 18 18
N n N
. . .
h h h
, , ,
v v v
1 1 1
. . .
1 1 1
1992 1992 1992
/ / /
01 01 01
/ / /
21 21 21
12 12 12
: : :
05 05 05
: : :
24 24 24
iima iima iima
Exp exp Exp
iima iima iima
$ $ $
# # #
ifndef ifndef ifndef
_ _ _
I i I
18 18 18
N n N
_ _ _
H h H
# # #
define defin define
_ _ _
I i I
18 18 18
N n N
_ _ _
H h H
# # #
include includ include
< < <
X x X
11 11 11
/ / /
Xlib xlib Xlib
. . .
h h h
> > >
extern extern extern
int int int
decomposeCharacterSet decomposecharacterset decomposeCharacterSet
( ( (
const const const
wchar wchar wchar
_ _ _
t t t
* * *
wc wc wc
_ _ _
str str str
, , ,
/ / /
* * *
IN in IN
* * *
/ / /
int int int
wc wc wc
_ _ _
len len len
, , ,
/ / /
* * *
IN in IN
* * *
/ / /
char char char
* * *
buf buf buf
, , ,
/ / /
* * *
OUT out OUT
* * *
/ / /
int int int
* * *
buflen buflen buflen
, , ,
/ / /
* * *
IN in IN
/ / /
OUT out OUT
* * *
/ / /
int int int
* * *
scanned scan scan
_ _ _
len len len
, , ,
/ / /
* * *
OUT out OUT
* * *
/ / /
char char char
* * *
* * *
charset charset charset
) ) )
; ; ;
/ / /
* * *
OUT out OUT
* * *
/ / /
extern extern extern
XmString xmstring XmString
wcharToXmString wchartoxmstr wcharToXmString
( ( (
const const const
wchar wchar wchar
_ _ _
t t t
* * *
wc wc wc
_ _ _
str str str
) ) )
; ; ;
extern extern extern
XmStringCharSet xmstringcharset XmStringCharSet
charsetOfWchar charsetofwchar charsetOfWchar
( ( (
const const const
wchar wchar wchar
_ _ _
t t t
wc wc wc
) ) )
; ; ;
# # #
endif endif endif
/ / /
* * *
_ _ _
I i I
18 18 18
N n N
_ _ _
H h H
* * *
/ / /
/ / /
/ / /
I i I
18 18 18
N n N
. . .
cc cc cc
/ / /
* * *
$ $ $
Id id Id
: : :
I i I
18 18 18
N n N
. . .
cc cc cc
, , ,
v v v
1 1 1
. . .
1 1 1
1992 1992 1992
/ / /
01 01 01
/ / /
21 21 21
12 12 12
: : :
05 05 05
: : :
05 05 05
iima iima iima
Exp exp Exp
$ $ $
* * *
/ / /
# # #
include includ include
< < <
stdlib stdlib stdlib
. . .
h h h
> > >
# # #
include includ include
< < <
X x X
11 11 11
/ / /
Xlibint xlibint Xlibint
. . .
h h h
> > >
# # #
include includ include
< < <
Xm xm Xm
/ / /
Xm xm Xm
. . .
h h h
> > >
# # #
include includ include
" " "
I i I
18 18 18
N n N
. . .
h h h
" " "
extern extern extern
" " "
C c C
" " "
{ { {
# # #
include includ include
< < <
X x X
11 11 11
/ / /
wchar wchar wchar
. . .
h h h
> > >
# # #
define defin define
_ _ _
XwcDecomposeGlyphCharset xwcdecomposeglyphcharset XwcDecomposeGlyphCharset
XXX xxx XXX
_ _ _
XwcDecomposeGlyphCharset xwcdecomposeglyphcharset XwcDecomposeGlyphCharset
# # #
define defin define
_ _ _
Xmbfscs xmbfscs Xmbfscs
XXX xxx XXX
_ _ _
Xmbfscs xmbfscs Xmbfscs
# # #
define defin define
_ _ _
Xmbctidtocsid xmbctidtocsid Xmbctidtocsid
XXX xxx XXX
_ _ _
Xmbctidtocsid xmbctidtocsid Xmbctidtocsid
# # #
include includ include
" " "
Xlocaleint xlocaleint Xlocaleint
. . .
h h h
" " "
# # #
undef undef undef
_ _ _
XwcDecomposeGlyphCharset xwcdecomposeglyphcharset XwcDecomposeGlyphCharset
# # #
undef undef undef
_ _ _
Xmbfscs xmbfscs Xmbfscs
# # #
undef undef undef
_ _ _
Xmbctidtocsid xmbctidtocsid Xmbctidtocsid
extern extern extern
int int int
_ _ _
XwcDecomposeGlyphCharset xwcdecomposeglyphcharset XwcDecomposeGlyphCharset
( ( (
XLocale xlocal XLocale
, , ,
const const const
wchar wchar wchar
_ _ _
t t t
* * *
, , ,
int int int
, , ,
char char char
* * *
, , ,
int int int
* * *
, , ,
int int int
* * *
, , ,
int int int
* * *
) ) )
; ; ;
extern extern extern
Charset charset Charset
* * *
_ _ _
Xmbfscs xmbfscs Xmbfscs
( ( (
XLocale xlocal XLocale
, , ,
_ _ _
CSID csid CSID
) ) )
; ; ;
extern extern extern
_ _ _
CSID csid CSID
_ _ _
Xmbctidtocsid xmbctidtocsid Xmbctidtocsid
( ( (
XLocale xlocal XLocale
, , ,
_ _ _
CSID csid CSID
) ) )
; ; ;
} } }
; ; ;
int int int
decomposeCharacterSet decomposecharacterset decomposeCharacterSet
( ( (
const const const
wchar wchar wchar
_ _ _
t t t
* * *
wc wc wc
_ _ _
str str str
, , ,
/ / /
* * *
IN in IN
* * *
/ / /
int int int
wc wc wc
_ _ _
len len len
, , ,
/ / /
* * *
IN in IN
* * *
/ / /
char char char
* * *
buf buf buf
, , ,
/ / /
* * *
OUT out OUT
* * *
/ / /
int int int
* * *
buf buf buf
_ _ _
len len len
, , ,
/ / /
* * *
IN in IN
/ / /
OUT out OUT
* * *
/ / /
int int int
* * *
scanned scan scan
_ _ _
len len len
, , ,
/ / /
* * *
OUT out OUT
* * *
/ / /
char char char
* * *
* * *
charset charset charset
) ) )
/ / /
* * *
OUT out OUT
* * *
/ / /
{ { {
XLocale xlocal XLocale
xlocale xlocal xlocale
= = =
_ _ _
XFallBackConvert xfallbackconvert XFallBackConvert
( ( (
) ) )
; ; ;
int int int
ctid ctid ctid
; ; ;
int int int
status status status
; ; ;
Charset charset Charset
* * *
xcharset xcharset xcharset
; ; ;
status status status
= = =
_ _ _
XwcDecomposeGlyphCharset xwcdecomposeglyphcharset XwcDecomposeGlyphCharset
( ( (
xlocale xlocal xlocale
, , ,
wc wc wc
_ _ _
str str str
, , ,
wc wc wc
_ _ _
len len len
, , ,
buf buf buf
, , ,
buf buf buf
_ _ _
len len len
, , ,
scanned scan scan
_ _ _
len len len
, , ,
& & &
ctid ctid ctid
) ) )
; ; ;
if if if
( ( (
status status status
= = =
= = =
Success success Success
) ) )
{ { {
xcharset xcharset xcharset
= = =
_ _ _
Xmbfscs xmbfscs Xmbfscs
( ( (
xlocale xlocal xlocale
, , ,
_ _ _
Xmbctidtocsid xmbctidtocsid Xmbctidtocsid
( ( (
xlocale xlocal xlocale
, , ,
ctid ctid ctid
) ) )
) ) )
; ; ;
* * *
charset charset charset
= = =
( ( (
xcharset xcharset xcharset
) ) )
? ? ?
xcharset xcharset xcharset
- - -
> > >
cs cs c
_ _ _
name name name
: : :
NULL null NULL
; ; ;
} } }
else els else
* * *
charset charset charset
= = =
NULL null NULL
; ; ;
return return return
status status status
; ; ;
} } }
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
An an An
included includ included
file file file
above abov above
, , ,
" " "
Xlocaleint xlocaleint Xlocaleint
. . .
h h h
" " "
, , ,
is is be
also also also
Xsi xsi Xsi
internal intern internal
and and and
we we we
copied copi copy
the the the
file file file
to to to
the the the
toolkit toolkit toolkit
directory directori directory
and and and
compiled compil compile
. . .
A a A
serious serious serious
issue issu issue
occured occur occur
when when when
we we we
tried tri try
to to to
compile compil compile
a a a
toolkit toolkit toolkit
application applic application
on on on
our our our
HP hp HP
machine machin machine
with with with
its it it
OS os OS
version version version
of of of
HP hp HP
- - -
UX ux UX
9 9 9
. . .
01 01 01
. . .
When when When
we we we
tried tri try
to to to
link link link
an an an
application applic application
based base base
on on on
our our our
toolkit toolkit toolkit
, , ,
link link link
errors error error
occured occur occur
saying say say
that that that
the the the
following follow following
functions function function
are are be
missing miss miss
: : :
_ _ _
Xmbctidtocsid xmbctidtocsid Xmbctidtocsid
( ( (
code code code
) ) )
_ _ _
Xmbfscs xmbfscs Xmbfscs
( ( (
code code code
) ) )
_ _ _
XwcDecomposeGlyphCharset xwcdecomposeglyphcharset XwcDecomposeGlyphCharset
( ( (
code code code
) ) )
_ _ _
XFallBackConvert xfallbackconvert XFallBackConvert
( ( (
code code code
) ) )
We we We
had had have
used use use
MIT mit MIT
release releas release
version version version
of of of
X x X
11 11 11
R r R
5 5 5
and and and
its it it
Xsi xsi Xsi
implementation implement implementation
until until until
HP hp HP
- - -
UP up UP
9 9 9
. . .
0 0 0
and and and
ran ran run
applications applic application
successfully success successfully
. . .
One one One
of of of
the the the
reasons reason reason
to to to
use use use
Xsi xsi Xsi
was was be
that that that
because becaus because
HP hp HP
did did do
not not not
release releas release
HP hp HP
' ' '
s s s
X x X
11 11 11
R r R
5 5 5
until until until
the the the
OS os OS
9 9 9
. . .
0 0 0
and and and
we we we
had had have
no no no
way way way
to to to
know know know
how how how
HP hp HP
' ' '
s s s
R r R
5 5 5
would would would
be be be
implemented implement implement
. . .
We we We
had had have
hoped hope hop
Xsi xsi Xsi
' ' '
s s s
popularity popular popularity
and and and
used use use
its it it
internal intern internal
functions function function
. . .
The the The
HP hp HP
' ' '
s s s
linker linker linker
complains complain complain
that that that
there there there
are are be
no no no
Xsi xsi Xsi
internal intern internal
functions function function
implemented implement implement
. . .
We we We
observe observ observe
from from from
HP hp HP
' ' '
s s s
libX libx libX
11 11 11
. . .
a a a
, , ,
they they they
used use use
some some some
Ximp ximp Ximp
implementation implement implementation
but but but
we we we
are are be
not not not
sure sure sure
if if if
they they they
used use use
MIT mit MIT
' ' '
s s s
vanilla vanilla vanilla
Ximp ximp Ximp
version version version
or or or
their their their
own own own
version version version
of of of
Ximp ximp Ximp
and and and
therefore therefor therefore
, , ,
finding find find
just just just
counter counter counter
part part part
functions function function
in in in
MIT mit MIT
' ' '
s s s
Ximp ximp Ximp
for for for
Xsi xsi Xsi
does doe do
not not not
seem seem seem
to to to
lead lead lead
us us u
a a a
solution solut solution
. . .
My my My
question question question
and and and
goal goal goal
is is be
to to to
know know know
how how how
we we we
can can can
construct construct construct
a a a
function function function
like like like
' ' '
decomposeCharacterset decomposecharacterset decomposeCharacterset
( ( (
) ) )
' ' '
listed list list
above abov above
. . .
Is is Is
there there there
any ani any
function function function
to to to
check check check
character charact character
set set set
of of of
each each each
element element element
of of of
wchar wchar wchar
_ _ _
t t t
type type type
strings string string
depending depend depend
on on on
locales local locale
? ? ?
If if If
it it it
is is be
a a a
public public public
function function function
, , ,
that that that
is is be
perfect perfect perfect
but but but
even even even
if if if
it it it
is is be
not not not
, , ,
we we we
want want want
to to to
use use use
any ani any
internal intern internal
functions function function
in in in
HP hp HP
' ' '
s s s
X x X
11 11 11
R r R
5 5 5
as as a
we we we
did did do
for for for
MIT mit MIT
' ' '
s s s
R r R
5 5 5
. . .
In in In
order order order
to to to
render render render
a a a
' ' '
wchar wchar wchar
_ _ _
t t t
' ' '
type type type
string string string
, , ,
there there there
must must must
be be be
some some some
machinery machineri machinery
to to to
judge judg judge
character charact character
sets set set
and and and
that that that
is is be
how how how
the the the
proper proper proper
fonts font font
are are be
selected select select
for for for
the the the
string string string
. . .
We we We
have have have
no no no
way way way
to to to
find find find
out out out
that that that
without without without
any ani any
HP hp HP
' ' '
s s s
X x X
11 11 11
R r R
5 5 5
source sourc source
files file file
. . .
We we We
want want want
to to to
know know know
how how how
we we we
can can can
use use use
that that that
for for for
our our our
goal goal goal
. . .
Any ani Any
help help help
or or or
comments comment comment
would would would
be be be
highly high highly
appreciated appreci appreciate
. . .
I i I
also also also
appreciate appreci appreciate
if if if
anyone anyon anyone
tell tell tell
me me me
about about about
Ximp ximp Ximp
treating treat treat
around around around
this this this
area area area
even even even
if if if
it it it
is is be
not not not
HP hp HP
' ' '
s s s
implementation implement implementation
. . .
Thank thank Thank
you you you
. . .
- - -
- - -
Takeshi takeshi Takeshi
Inoue inou Inoue
inoue inou inoue
@ @ @
crd crd crd
. . .
yokogawa yokogawa yokogawa
. . .
co co co
. . .
jp jp jp
Yokogawa yokogawa Yokogawa
Electric electr Electric
Corporation corpor Corporation
Open open Open
Systems system Systems
Laboratory laboratori Laboratory
0422 0422 0422
( ( (
52 52 52
) ) )
5557 5557 5557
