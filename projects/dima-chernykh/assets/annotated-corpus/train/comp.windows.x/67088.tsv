From from From
: : :
leec leec leec
@ @ @
cb cb cb
- - -
iris iri iris
. . .
Stanford stanford Stanford
. . .
EDU edu EDU
( ( (
Christopher christoph Christopher
Lee lee Lee
) ) )
Subject subject Subject
: : :
HELP help HELP
! ! !
Setting set Setting
Colormaps colormap Colormaps
on on on
multi multi multi
- - -
top top top
- - -
level level level
APP app APP
Keywords keyword Keywords
: : :
GLX glx GLX
mixed mix mix
- - -
model model model
, , ,
colormap colormap colormap
Organization organ Organization
: : :
DSG dsg DSG
, , ,
Stanford stanford Stanford
University univers University
, , ,
CA ca CA
94305 94305 94305
, , ,
USA usa USA
Lines line Lines
: : :
71 71 71
Dear dear Dear
SGI sgi SGI
and and and
netter netter netter
GL gl GL
- - -
X x X
Mixed mix Mixed
- - -
Model model Model
experts expert expert
, , ,
I i I
am am be
writing write write
a a a
mixed mix mixed
model model model
application applic application
that that that
creates creat create
a a a
couple coupl couple
different differ different
color color color
maps map map
for for for
different differ different
windows window window
, , ,
and and and
I i I
' ' '
ve ve ve
been been be
having have have
trouble troubl trouble
getting get get
the the the
window window window
manager manag manager
to to to
reliably reliabl reliably
honor honor honor
my my my
requests request request
. . .
In in In
some some some
environments environ environment
( ( (
entry entri entry
level level level
R r R
3000 3000 3000
Indigo indigo Indigo
w w w
/ / /
4 4 4
. . .
0 0 0
. . .
5 5 5
) ) )
all all all
windows window window
are are be
getting get get
properly proper properly
connected connect connect
to to to
their their their
designated design designate
color color color
maps map map
, , ,
but but but
on on on
others other others
( ( (
an an an
IRIS iri IRIS
4 4 4
D d D
240 240 240
/ / /
GTX gtx GTX
; ; ;
also also also
a a a
different differ different
entry entri entry
level level level
Indigo indigo Indigo
) ) )
the the the
color color color
mapping map mapping
is is be
unreliable unreli unreliable
and and and
changes chang change
behavior behavior behavior
when when when
I i I
compile compil compile
at at at
different differ different
times time time
. . .
The the The
most most most
common common common
problem problem problem
is is be
that that that
all all all
non non non
- - -
top top top
- - -
level level level
windows window window
fail fail fail
to to to
be be be
displayed display display
according accord accord
to to to
their their their
colormap colormap colormap
. . .
My my My
application applic application
starts start start
out out out
by by by
creating creat create
three three three
top top top
- - -
level level level
windows window window
; ; ;
in in in
some some some
cases case case
all all all
but but but
the the the
first first first
of of of
these these these
also also also
fail fail fail
to to to
be be be
displayed display display
by by by
their their their
colormap colormap colormap
. . .
This this This
is is be
spectacularly spectacular spectacularly
aggravating aggrav aggravating
. . .
I i I
would would would
dearly dear dearly
appreciate appreci appreciate
1 1 1
. . .
an an an
explanation explan explanation
of of of
the the the
standard standard standard
, , ,
RIGHT right RIGHT
, , ,
CORRECT correct CORRECT
way way way
to to to
give give give
a a a
window window window
a a a
colormap colormap colormap
such such such
that that that
the the the
Window window Window
Manager manag Manager
will will will
Honor honor Honor
and and and
Obey obey Obey
it it it
; ; ;
2 2 2
. . .
any ani any
advice advic advice
about about about
problems problem problem
that that that
could could could
cause caus cause
my my my
failure failur failure
to to to
get get get
my my my
desired desir desired
colormaps colormap colormaps
. . .
By by By
now now now
I i I
have have have
exhausted exhaust exhaust
my my my
own own own
attempts attempt attempt
on on on
this this this
, , ,
having have have
tried tri try
everything everyth everything
reasonable reason reasonable
or or or
imaginable imagin imaginable
. . .
Below below Below
is is be
example exampl example
code code code
giving give give
the the the
schematic schemat schematic
for for for
how how how
I i I
have have have
been been be
* * *
TRYING tri TRYING
* * *
to to to
do do do
this this this
. . .
Please pleas Please
, , ,
please pleas please
, , ,
please pleas please
SOMEBODY somebodi SOMEBODY
tell tell tell
me me me
what what what
I i I
am am be
doing do do
wrong wrong wrong
/ / /
how how how
to to to
do do do
it it it
right right right
! ! !
! ! !
! ! !
Yours your Yours
, , ,
Chris chris Chris
Lee lee Lee
/ / /
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
* * *
/ / /
Display display Display
* * *
dpy dpi dpy
; ; ;
/ / /
* * *
DECLARE declar DECLARE
SOME some SOME
DATA data DATA
. . .
. . .
. . .
* * *
/ / /
Colormap colormap Colormap
popup popup popup
_ _ _
cmap cmap cmap
; ; ;
XColor xcolor XColor
mycolor mycolor mycolor
; ; ;
Window window Window
win win win
; ; ;
XSetWindowAttributes xsetwindowattribut XSetWindowAttributes
cwa cwa cwa
; ; ;
int int int
nwlist nwlist nwlist
; ; ;
Window window Window
* * *
wlist wlist wlist
; ; ;
/ / /
* * *
NB nb NB
: : :
FOR for FOR
BREVITY breviti BREVITY
, , ,
NOT not NOT
SHOWING show SHOWING
ALL all ALL
CODE code CODE
LINES line LINES
- - -
- - -
JUST just JUST
A a A
SCHEMATIC schemat SCHEMATIC
* * *
/ / /
popup popup popup
_ _ _
cmap cmap cmap
= = =
XCreateColormap xcreatecolormap XCreateColormap
( ( (
dpy dpi dpy
, , ,
DefaultRootWindow defaultrootwindow DefaultRootWindow
( ( (
dpy dpi dpy
) ) )
, , ,
vis vis vi
- - -
> > >
visual visual visual
, , ,
AllocAll allocal AllocAll
) ) )
; ; ;
/ / /
* * *
HERE here HERE
WE we WE
STORE store STORE
A a A
BUNCH bunch BUNCH
OF of OF
COLORS color COLORS
USING use USING
XStoreColor xstorecolor XStoreColor
( ( (
dpy dpi dpy
, , ,
popup popup popup
_ _ _
cmap cmap cmap
, , ,
& & &
mycolor mycolor mycolor
) ) )
; ; ;
. . .
. . .
. . .
* * *
/ / /
cwa cwa cwa
. . .
colormap colormap colormap
= = =
popup popup popup
_ _ _
cmap cmap cmap
; ; ;
win win win
= = =
XCreateWindow xcreatewindow XCreateWindow
( ( (
dpy dpi dpy
, , ,
parent parent parent
, , ,
x x x
, , ,
y y y
, , ,
w w w
, , ,
h h h
, , ,
borderWidth borderwidth borderWidth
, , ,
vis vis vi
- - -
> > >
depth depth depth
, , ,
InputOutput inputoutput InputOutput
, , ,
vis vis vi
- - -
> > >
visual visual visual
, , ,
CWColormap cwcolormap CWColormap
| | |
CWBorderPixel cwborderpixel CWBorderPixel
, , ,
& & &
cwa cwa cwa
) ) )
; ; ;
/ / /
* * *
LIST list LIST
ALL all ALL
SUB sub SUB
WINDOWS window WINDOWS
OF of OF
my my my
_ _ _
topwin topwin topwin
, , ,
PARENT parent PARENT
OF of OF
win win win
, , ,
INTO into INTO
wlist wlist wlist
; ; ;
nwlist nwlist nwlist
IS is IS
COUNTER counter COUNTER
OF of OF
ENTRIES entri ENTRIES
IN in IN
wlist wlist wlist
. . .
NB nb NB
: : :
wlist wlist wlist
is is be
static static static
storage storag storage
that that that
can can can
be be be
relied reli rely
on on on
not not not
to to to
go go go
away away away
or or or
be be be
corrupted corrupt corrupt
. . .
I i I
thought thought think
of of of
that that that
! ! !
Does doe Does
anyone anyon anyone
know know know
if if if
setting set set
WM wm WM
properties properti property
is is be
by by by
data data data
copy copi copy
, , ,
or or or
by by by
reference refer reference
pointer pointer pointer
? ? ?
ie ie ie
. . .
is is be
it it it
acceptable accept acceptable
to to to
pass pass pass
data data data
for for for
a a a
Property properti Property
, , ,
then then then
free free free
the the the
data data data
? ? ?
* * *
/ / /
XSetWMColormapWindows xsetwmcolormapwindow XSetWMColormapWindows
( ( (
dpy dpi dpy
, , ,
my my my
_ _ _
topwin topwin topwin
, , ,
wlist wlist wlist
, , ,
nwlist nwlist nwlist
) ) )
; ; ;
XMapRaised xmaprais XMapRaised
( ( (
Display display Display
0 0 0
, , ,
win win win
) ) )
; ; ;
/ / /
* * *
LATER later LATER
ON on ON
WE we WE
HANDLE handl HANDLE
XEvents xevent XEvents
NORMALLY normal NORMALLY
. . .
. . .
. . .
TYPICAL typic TYPICAL
EVENTLOOP eventloop EVENTLOOP
* * *
/ / /
