From from From
: : :
stolk stolk stolk
@ @ @
fwi fwi fwi
. . .
uva uva uva
. . .
nl nl nl
( ( (
Bram bram Bram
) ) )
Subject subject Subject
: : :
Creating creat Creating
8 8 8
bit bit bit
windows window window
on on on
24 24 24
bit bit bit
display display display
. . .
. . .
How how How
? ? ?
Organization organ Organization
: : :
FWI fwi FWI
, , ,
University univers University
of of of
Amsterdam amsterdam Amsterdam
Lines line Lines
: : :
75 75 75
Nntp nntp Nntp
- - -
Posting post Posting
- - -
Host host Host
: : :
carol carol carol
. . .
fwi fwi fwi
. . .
uva uva uva
. . .
nl nl nl
Greetings greet Greetings
, , ,
I i I
am am be
using use use
an an an
X x X
server server server
that that that
provides provid provide
3 3 3
visuals visual visuals
: : :
PseudoColor pseudocolor PseudoColor
8 8 8
bit bit bit
, , ,
Truecolor truecolor Truecolor
24 24 24
bit bit bit
and and and
DirectColor directcolor DirectColor
24 24 24
bit bit bit
. . .
A a A
problem problem problem
occurs occur occur
when when when
I i I
try tri try
to to to
create creat create
a a a
window window window
with with with
a a a
visual visual visual
that that that
is is be
different differ different
from from from
the the the
visual visual visual
of of of
the the the
parent parent parent
( ( (
which which which
uses use use
the the the
default default default
visual visual visual
which which which
is is be
TC tc TC
24 24 24
) ) )
. . .
In in In
the the the
Xlib xlib Xlib
reference refer reference
guide guid guide
from from from
' ' '
O o O
reilly reilli reilly
one one one
can can can
read read read
in in in
the the the
section section section
about about about
XCteateWindow xcteatewindow XCteateWindow
, , ,
something someth something
like like like
: : :
" " "
In in In
the the the
current current current
implementation implement implementation
of of of
X x X
11 11 11
: : :
When when When
using use use
a a a
visual visual visual
other other other
than than than
the the the
parent parent parent
' ' '
s s s
, , ,
be be be
sure sure sure
to to to
create creat create
or or or
find find find
a a a
suitable suitabl suitable
colourmap colourmap colourmap
which which which
is is be
to to to
be be be
used use use
in in in
the the the
window window window
attributes attribut attribute
when when when
creating creat create
, , ,
or or or
else els else
a a a
BadMatch badmatch BadMatch
occurs occur occurs
. . .
" " "
This this This
warning warn warning
, , ,
strangely strang strangely
enough enough enough
, , ,
is is be
only onli only
mentioned mention mention
in in in
the the the
newer newer new
editions edit edition
of of of
the the the
X x X
11 11 11
R r R
5 5 5
guides guid guide
. . .
However howev However
, , ,
even even even
if if if
I i I
pass pass pass
along along along
a a a
suitable suitabl suitable
colourmap colourmap colourmap
, , ,
I i I
still still still
get get get
a a a
BadMatch badmatch BadMatch
when when when
I i I
create creat create
a a a
window window window
with with with
a a a
non non non
- - -
default default default
visual visual visual
. . .
The the The
code code code
looks look look
like like like
this this this
: : :
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
cut cut cut
here here here
and and and
you you you
' ' '
ll ll ll
destroy destroy destroy
your your your
CRT crt CRT
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
Window window Window
create creat create
_ _ _
8 8 8
bit bit bit
_ _ _
window window window
_ _ _
on on on
_ _ _
truecolour truecolour truecolour
_ _ _
display display display
( ( (
dpy dpi dpy
, , ,
width width width
, , ,
height height height
) ) )
Display display Display
* * *
dpy dpi dpy
; ; ;
int int int
width width width
, , ,
height height height
; ; ;
{ { {
Window window Window
win win win
; ; ;
XVisualInfo xvisualinfo XVisualInfo
vinfo vinfo vinfo
; ; ;
XSetWindowAttributes xsetwindowattribut XSetWindowAttributes
attr attr attr
; ; ;
fprintf fprintf fprintf
( ( (
stderr stderr stderr
, , ,
" " "
Opening open Opening
8 8 8
bit bit bit
window window window
. . .
. . .
. . .
\ \ \
n n n
" " "
) ) )
; ; ;
if if if
( ( (
! ! !
XMatchVisualInfo xmatchvisualinfo XMatchVisualInfo
( ( (
dpy dpi dpy
, , ,
DefaultScreen defaultscreen DefaultScreen
( ( (
dpy dpi dpy
) ) )
, , ,
8 8 8
, , ,
PseudoColor pseudocolor PseudoColor
, , ,
& & &
vinfo vinfo vinfo
) ) )
) ) )
{ { {
fprintf fprintf fprintf
( ( (
stderr stderr stderr
, , ,
" " "
Your your Your
display display display
can can can
' ' '
t t t
handle handl handle
8 8 8
bit bit bit
PseudoColor pseudocolor PseudoColor
. . .
\ \ \
n n n
" " "
) ) )
; ; ;
exit exit exit
( ( (
1 1 1
) ) )
; ; ;
} } }
fprintf fprintf fprintf
( ( (
stderr stderr stderr
, , ,
" " "
Using use Using
visual visual visual
: : :
% % %
x x x
\ \ \
n n n
" " "
, , ,
vinfo vinfo vinfo
. . .
visual visual visual
- - -
> > >
visualid visualid visualid
) ) )
; ; ;
cmap cmap cmap
= = =
XCreateColormap xcreatecolormap XCreateColormap
( ( (
dpy dpi dpy
, , ,
DefaultRootWindow defaultrootwindow DefaultRootWindow
( ( (
dpy dpi dpy
) ) )
, , ,
vinfo vinfo vinfo
. . .
visual visual visual
, , ,
AllocNone allocnon AllocNone
) ) )
; ; ;
XSync xsync XSync
( ( (
dpy dpi dpy
, , ,
False fals False
) ) )
; ; ;
XInstallColormap xinstallcolormap XInstallColormap
( ( (
dpy dpi dpy
, , ,
cmap cmap cmap
) ) )
; ; ;
/ / /
* * *
ommision ommis ommision
of of of
this this this
line line line
gives give give
same same same
result result result
* * *
/ / /
attr attr attr
. . .
colormap colormap colormap
= = =
cmap cmap cmap
; ; ;
win win win
= = =
XCreateWindow xcreatewindow XCreateWindow
( ( (
dpy dpi dpy
, , ,
DefaultRootWindow defaultrootwindow DefaultRootWindow
( ( (
dpy dpi dpy
) ) )
, , ,
10 10 10
, , ,
10 10 10
, , ,
width width width
, , ,
height height height
, , ,
CopyFromParent copyfrompar CopyFromParent
, , ,
/ / /
* * *
border border border
width width width
* * *
/ / /
8 8 8
, , ,
/ / /
* * *
depth depth depth
* * *
/ / /
InputOutput inputoutput InputOutput
, , ,
/ / /
* * *
class class class
* * *
/ / /
vinfo vinfo vinfo
. . .
visual visual visual
, , ,
/ / /
* * *
visual visual visual
* * *
/ / /
CWColormap cwcolormap CWColormap
, , ,
& & &
attr attr attr
) ) )
; ; ;
return return return
win win win
; ; ;
} } }
- - -
- - -
- - -
cut cut cut
here here here
and and and
you you you
' ' '
ll ll ll
destroy destroy destroy
your your your
CRT crt CRT
- - -
- - -
- - -
- - -
- - -
Executing execut Executing
this this this
piece piec piece
of of of
code code code
results result result
in in in
a a a
BadMatch badmatch BadMatch
error error error
. . .
Anybody anybodi Anybody
who who who
knows know know
why whi why
? ? ?
If if If
so so so
, , ,
please pleas please
drop drop drop
me me me
a a a
line line line
. . .
Take take Take
care care care
, , ,
Bram bram Bram
Stolk stolk Stolk
stolk stolk stolk
@ @ @
fwi fwi fwi
. . .
uva uva uva
. . .
nl nl nl
