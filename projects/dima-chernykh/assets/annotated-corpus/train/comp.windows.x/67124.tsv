From from From
: : :
davewood davewood davewood
@ @ @
bruno bruno bruno
. . .
cs cs c
. . .
colorado colorado colorado
. . .
edu edu edu
( ( (
David david David
Rex rex Rex
Wood wood Wood
) ) )
Subject subject Subject
: : :
Calling call Calling
a a a
library librari library
which which which
creates creat create
widgets widget widget
( ( (
multiple multipl multiple
times time time
) ) )
Nntp nntp Nntp
- - -
Posting post Posting
- - -
Host host Host
: : :
bruno bruno bruno
. . .
cs cs c
. . .
colorado colorado colorado
. . .
edu edu edu
Organization organ Organization
: : :
University univers University
of of of
Colorado colorado Colorado
, , ,
Boulder boulder Boulder
Lines line Lines
: : :
91 91 91
A a A
few few few
days day day
ago ago ago
I i I
posted post post
a a a
question question question
about about about
trying tri try
to to to
call call call
a a a
function function function
which which which
set set set
up up up
an an an
X x X
app app app
multiple multipl multiple
times time time
. . .
It it It
was was be
pointed point point
out out out
that that that
XtAppInitialize xtappiniti XtAppInitialize
( ( (
) ) )
should should should
never never never
be be be
called call call
more more more
than than than
once onc once
. . .
This this This
helped help help
. . .
However howev However
, , ,
I i I
am am be
still still still
having have have
some some some
problems problem problem
. . .
Below below Below
is is be
a a a
new new new
little littl little
test test test
program program program
that that that
more more more
closely close closely
models model model
my my my
real real real
program program program
. . .
In in In
the the the
actual actual actual
program program program
, , ,
I i I
am am be
writing write write
a a a
library librari library
, , ,
callable callabl callable
from from from
any ani any
other other other
program program program
. . .
This this This
means mean mean
that that that
the the the
first first first
time time time
the the the
lib lib lib
function function function
is is be
called call call
, , ,
it it it
must must must
initialize initi initialize
things thing thing
, , ,
and and and
after after after
that that that
, , ,
it it it
should should should
just just just
use use use
the the the
old old old
stuff stuff stuff
( ( (
still still still
around around around
because becaus because
of of of
static static static
variables variabl variable
) ) )
. . .
In in In
the the the
demo demo demo
below below below
, , ,
main main main
( ( (
) ) )
represents repres represent
the the the
main main main
program program program
calling call call
my my my
library librari library
and and and
doit doit doit
( ( (
) ) )
represents repres represent
the the the
interface interfac interface
to to to
the the the
library librari library
function function function
. . .
# # #
include includ include
< < <
X x X
11 11 11
/ / /
Xlib xlib Xlib
. . .
h h h
> > >
# # #
include includ include
< < <
Xm xm Xm
/ / /
Xm xm Xm
. . .
h h h
> > >
# # #
include includ include
< < <
Xm xm Xm
/ / /
PushB pushb PushB
. . .
h h h
> > >
# # #
include includ include
< < <
stdio stdio stdio
. . .
h h h
> > >
# # #
include includ include
< < <
stdlib stdlib stdlib
. . .
h h h
> > >
void void void
bla bla bla
( ( (
XtAppContext xtappcontext XtAppContext
app app app
, , ,
Widget widget Widget
top top top
) ) )
{ { {
Widget widget Widget
topone topon topone
= = =
top top top
; ; ;
/ / /
/ / /
in in in
real real real
prog prog prog
, , ,
these these these
are are be
member member member
vars var var
XtAppContext xtappcontext XtAppContext
theapp theapp theapp
= = =
app app app
; ; ;
/ / /
/ / /
of of of
a a a
class class class
int int int
junk junk junk
= = =
0 0 0
; ; ;
Display display Display
* * *
dis dis dis
= = =
XtOpenDisplay xtopendisplay XtOpenDisplay
( ( (
theapp theapp theapp
, , ,
NULL null NULL
, , ,
NULL null NULL
, , ,
NULL null NULL
, , ,
NULL null NULL
, , ,
0 0 0
, , ,
& & &
junk junk junk
, , ,
NULL null NULL
) ) )
; ; ;
Widget widget Widget
box box box
= = =
XtVaCreateManagedWidget xtvacreatemanagedwidget XtVaCreateManagedWidget
( ( (
" " "
blaaa blaaa blaaa
" " "
, , ,
xmPushButtonWidgetClass xmpushbuttonwidgetclass xmPushButtonWidgetClass
, , ,
topone topon topone
, , ,
XmNheight xmnheight XmNheight
, , ,
50 50 50
, , ,
XmNwidth xmnwidth XmNwidth
, , ,
50 50 50
, , ,
NULL null NULL
) ) )
; ; ;
XtRealizeWidget xtrealizewidget XtRealizeWidget
( ( (
topone topon topone
) ) )
; ; ;
for for for
( ( (
int int int
i i i
= = =
0 0 0
; ; ;
i i i
< < <
= = =
25 25 25
; ; ;
i i i
+ + +
+ + +
) ) )
/ / /
/ / /
real real real
prog prog prog
returns return return
when when when
" " "
Exit exit Exit
" " "
button button button
clicked click click
{ { {
XEvent xevent XEvent
event event event
; ; ;
XtAppNextEvent xtappnextev XtAppNextEvent
( ( (
theapp theapp theapp
, , ,
& & &
event event event
) ) )
; ; ;
XtDispatchEvent xtdispatchev XtDispatchEvent
( ( (
& & &
event event event
) ) )
; ; ;
} } }
XtDestroyWidget xtdestroywidget XtDestroyWidget
( ( (
box box box
) ) )
; ; ;
XtCloseDisplay xtclosedisplay XtCloseDisplay
( ( (
dis dis dis
) ) )
; ; ;
} } }
/ / /
/ / /
SetItUp setitup SetItUp
- - -
should should should
be be be
called call call
once onc once
only onli only
void void void
SetItUp setitup SetItUp
( ( (
XtAppContext xtappcontext XtAppContext
* * *
app app app
, , ,
Widget widget Widget
* * *
top top top
) ) )
{ { {
int int int
junk junk junk
= = =
0 0 0
; ; ;
( ( (
* * *
top top top
) ) )
= = =
XtAppInitialize xtappiniti XtAppInitialize
( ( (
app app app
, , ,
" " "
test test test
" " "
, , ,
NULL null NULL
, , ,
0 0 0
, , ,
& & &
junk junk junk
, , ,
NULL null NULL
, , ,
NULL null NULL
, , ,
NULL null NULL
, , ,
0 0 0
) ) )
; ; ;
} } }
/ / /
/ / /
doit doit doit
- - -
some some some
library librari library
function function function
callable callabl callable
from from from
the the the
outside outsid outside
void void void
doit doit doit
( ( (
) ) )
{ { {
static static static
XtAppContext xtappcontext XtAppContext
app app app
; ; ;
/ / /
/ / /
use use use
these these these
every everi every
time time time
called call call
static static static
Widget widget Widget
top top top
; ; ;
static static static
int int int
setup setup setup
= = =
0 0 0
; ; ;
if if if
( ( (
! ! !
setup setup setup
) ) )
{ { {
SetItUp setitup SetItUp
( ( (
& & &
app app app
, , ,
& & &
top top top
) ) )
; ; ;
setup setup setup
= = =
1 1 1
; ; ;
} } }
bla bla bla
( ( (
app app app
, , ,
top top top
) ) )
; ; ;
} } }
/ / /
/ / /
main main main
- - -
program program program
which which which
links link link
to to to
my my my
library librari library
main main main
( ( (
) ) )
{ { {
for for for
( ( (
int int int
i i i
= = =
0 0 0
; ; ;
i i i
< < <
= = =
20 20 20
; ; ;
i i i
+ + +
+ + +
) ) )
{ { {
doit doit doit
( ( (
) ) )
; ; ;
printf printf printf
( ( (
" " "
sleeping sleep sleeping
. . .
. . .
. . .
\ \ \
n n n
" " "
) ) )
; ; ;
/ / /
/ / /
widget widget widget
still still still
on on on
screen screen screen
at at at
this this this
point point point
sleep sleep sleep
( ( (
5 5 5
) ) )
; ; ;
} } }
} } }
The the The
problem problem problem
is is be
that that that
the the the
widget widget widget
does doe do
not not not
go go go
away away away
until until until
the the the
new new new
one one one
is is be
created creat create
. . .
( ( (
It it It
is is be
still still still
on on on
the the the
screen screen screen
- - -
- - -
unusuable unusu unusuable
- - -
- - -
during dure during
the the the
" " "
sleep sleep sleep
" " "
in in in
the the the
main main main
prog prog prog
, , ,
despite despit despite
the the the
XtDestroyWidget xtdestroywidget XtDestroyWidget
call call call
) ) )
. . .
Anyone anyon Anyone
see see see
something someth something
I i I
' ' '
m m m
missing miss miss
? ? ?
Thanks thank Thanks
very veri very
much much much
. . .
( ( (
Please pleas Please
respond respond respond
via via via
email email email
) ) )
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
David david David
Rex rex Rex
Wood wood Wood
- - -
- - -
davewood davewood davewood
@ @ @
cs cs c
. . .
colorado colorado colorado
. . .
edu edu edu
- - -
- - -
University univers University
of of of
Colorado colorado Colorado
at at at
Boulder boulder Boulder
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
