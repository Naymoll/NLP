From from From
: : :
yang yang yang
@ @ @
cs cs c
. . .
umass umass uma
. . .
edu edu edu
( ( (
Hong hong Hong
Yang yang Yang
) ) )
Subject subject Subject
: : :
colormap colormap colormap
question question question
Organization organ Organization
: : :
University univers University
of of of
Massachusetts massachusett Massachusetts
/ / /
Amherst amherst Amherst
Lines line Lines
: : :
139 139 139
NNTP nntp NNTP
- - -
Posting post Posting
- - -
Host host Host
: : :
freya freya freya
. . .
cs cs c
. . .
umass umass uma
. . .
edu edu edu
Hi hi Hi
, , ,
Experts expert Experts
, , ,
I i I
' ' '
m m m
kind kind kind
of of of
new new new
to to to
X x X
. . .
The the The
following follow following
question question question
is is be
strange strang strange
to to to
me me me
. . .
I i I
am am be
trying tri try
to to to
modify modifi modify
the the the
contents content content
of of of
the the the
colormap colormap colormap
but but but
failed fail fail
without without without
reason reason reason
( ( (
to to to
me me me
) ) )
. . .
I i I
am am be
using use use
the the the
following follow follow
piece piec piece
of of of
code code code
: : :
toplevel toplevel toplevel
= = =
XtInitialize xtiniti XtInitialize
( ( (
argv argv argv
[ [ [
0 0 0
] ] ]
, , ,
" " "
Testcolor testcolor Testcolor
" " "
, , ,
NULL null NULL
, , ,
0 0 0
, , ,
& & &
argc argc argc
, , ,
argv argv argv
) ) )
; ; ;
dpy dpi dpy
= = =
XtDisplay xtdisplay XtDisplay
( ( (
toplevel toplevel toplevel
) ) )
; ; ;
scr scr scr
= = =
DefaultScreen defaultscreen DefaultScreen
( ( (
dpy dpi dpy
) ) )
; ; ;
def def def
_ _ _
colormap colormap colormap
= = =
DefaultColormap defaultcolormap DefaultColormap
( ( (
dpy dpi dpy
, , ,
scr scr scr
) ) )
; ; ;
if if if
( ( (
XAllocColorCells xalloccolorcel XAllocColorCells
( ( (
dpy dpi dpy
, , ,
def def def
_ _ _
colormap colormap colormap
, , ,
True true True
, , ,
NULL null NULL
, , ,
0 0 0
, , ,
cells cell cell
, , ,
5 5 5
) ) )
) ) )
{ { {
color color color
. . .
pixel pixel pixel
= = =
cells cell cell
[ [ [
0 0 0
] ] ]
; ; ;
color color color
. . .
red red red
= = =
250 250 250
; ; ;
color color color
. . .
green green green
= = =
125 125 125
; ; ;
color color color
. . .
blue blue blue
= = =
0 0 0
; ; ;
color color color
. . .
flags flag flag
= = =
DoRed dore DoRed
| | |
DoGreen dogreen DoGreen
| | |
DoBlue doblu DoBlue
; ; ;
XStoreColor xstorecolor XStoreColor
( ( (
dpy dpi dpy
, , ,
def def def
_ _ _
colormap colormap colormap
, , ,
& & &
color color color
) ) )
; ; ;
printf printf printf
( ( (
" " "
\ \ \
n n n
Try tri Try
to to to
allocate alloc allocate
, , ,
the the the
color color color
% % %
d d d
as as a
( ( (
% % %
d d d
, , ,
% % %
d d d
, , ,
% % %
d d d
) ) )
" " "
, , ,
color color color
. . .
pixel pixel pixel
, , ,
color color color
. . .
red red red
, , ,
color color color
. . .
green green green
, , ,
color color color
. . .
blue blue blue
) ) )
; ; ;
XQueryColor xquerycolor XQueryColor
( ( (
dpy dpi dpy
, , ,
def def def
_ _ _
colormap colormap colormap
, , ,
& & &
color color color
) ) )
; ; ;
printf printf printf
( ( (
" " "
\ \ \
n n n
After after After
allocate alloc allocate
, , ,
the the the
color color color
% % %
d d d
is is be
( ( (
% % %
d d d
, , ,
% % %
d d d
, , ,
% % %
d d d
) ) )
" " "
, , ,
color color color
. . .
pixel pixel pixel
, , ,
color color color
. . .
red red red
, , ,
color color color
. . .
green green green
, , ,
color color color
. . .
blue blue blue
) ) )
; ; ;
} } }
else els else
printf printf printf
( ( (
" " "
\ \ \
n n n
Error error Error
: : :
couldn couldn couldn
' ' '
t t t
allocate alloc allocate
color color color
cells cell cell
" " "
) ) )
; ; ;
Running run Running
output output output
: : :
Try tri Try
to to to
allocate alloc allocate
, , ,
the the the
color color color
7 7 7
as as a
( ( (
250 250 250
, , ,
125 125 125
, , ,
0 0 0
) ) )
After after After
allocate alloc allocate
, , ,
the the the
color color color
7 7 7
is is be
( ( (
0 0 0
, , ,
0 0 0
, , ,
0 0 0
) ) )
After after After
XStoreColor xstorecolor XStoreColor
( ( (
) ) )
, , ,
XQueryColor xquerycolor XQueryColor
( ( (
) ) )
just just just
returned return return
the the the
original origin original
value valu value
. . .
No no No
failure failur failure
/ / /
error error error
displayed display displayed
but but but
the the the
contents content content
of of of
colormap colormap colormap
are are be
obvious obvious obvious
unchanged unchang unchanged
. . .
( ( (
I i I
also also also
tried tri try
to to to
draw draw draw
a a a
line line line
using use use
the the the
colors color color
but but but
it it it
turned turn turn
out out out
to to to
be be be
the the the
unmodified unmodifi unmodified
colors color color
. . .
) ) )
So so So
what what what
is is be
my my my
problem problem problem
? ? ?
How how How
to to to
modify modifi modify
the the the
contents content content
of of of
the the the
colormap colormap colormap
? ? ?
Any ani Any
help help help
/ / /
information inform information
will will will
be be be
appreciated appreci appreciate
. . .
Please pleas Please
send send send
mail mail mail
to to to
" " "
yang yang yang
@ @ @
cs cs c
. . .
umass umass uma
. . .
edu edu edu
" " "
. . .
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
William william William
email email email
: : :
" " "
yang yang yang
@ @ @
cs cs c
. . .
umass umass uma
. . .
edu edu edu
" " "
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
By by By
the the the
way way way
, , ,
the the the
following follow following
is is be
the the the
environment environ environment
I i I
am am be
using use use
( ( (
output output output
of of of
" " "
xdpyinfo xdpyinfo xdpyinfo
" " "
) ) )
. . .
It it It
shows show show
the the the
default default default
visual visual visual
is is be
PseudoColor pseudocolor PseudoColor
. . .
version version version
number number number
: : :
11 11 11
. . .
0 0 0
vendor vendor vendor
string string string
: : :
DECWINDOWS decwindow DECWINDOWS
DigitalEquipmentCorporation digitalequipmentcorpor DigitalEquipmentCorporation
UWS uw UWS
4 4 4
. . .
2 2 2
vendor vendor vendor
release releas release
number number number
: : :
1 1 1
maximum maximum maximum
request request request
size size size
: : :
16384 16384 16384
longwords longword longwords
( ( (
65536 65536 65536
bytes byte byte
) ) )
motion motion motion
buffer buffer buffer
size size size
: : :
100 100 100
bitmap bitmap bitmap
unit unit unit
, , ,
bit bit bit
order order order
, , ,
padding pad padding
: : :
32 32 32
, , ,
LSBFirst lsbfirst LSBFirst
, , ,
32 32 32
image imag image
byte byte byte
order order order
: : :
LSBFirst lsbfirst LSBFirst
number number number
of of of
supported support supported
pixmap pixmap pixmap
formats format format
: : :
2 2 2
supported support support
pixmap pixmap pixmap
formats format format
: : :
depth depth depth
1 1 1
, , ,
bits bit bit
_ _ _
per per per
_ _ _
pixel pixel pixel
1 1 1
, , ,
scanline scanlin scanline
_ _ _
pad pad pad
32 32 32
depth depth depth
8 8 8
, , ,
bits bit bit
_ _ _
per per per
_ _ _
pixel pixel pixel
8 8 8
, , ,
scanline scanlin scanline
_ _ _
pad pad pad
32 32 32
keycode keycod keycode
range rang range
: : :
minimum minimum minimum
86 86 86
, , ,
maximum maximum maximum
251 251 251
number number number
of of of
extensions extens extension
: : :
8 8 8
Adobe adob Adobe
- - -
DPS dps DPS
- - -
Extension extens Extension
DPSExtension dpsextens DPSExtension
SHAPE shape SHAPE
MIT mit MIT
- - -
SHM shm SHM
Multi multi Multi
- - -
Buffering buffer Buffering
XInputExtension xinputextens XInputExtension
MIT mit MIT
- - -
SUNDRY sundri SUNDRY
- - -
NONSTANDARD nonstandard NONSTANDARD
DEC dec DEC
- - -
XTRAP xtrap XTRAP
default default default
screen screen screen
number number number
: : :
0 0 0
number number number
of of of
screens screen screen
: : :
1 1 1
screen screen screen
# # #
0 0 0
: : :
dimensions dimens dimension
: : :
1024 1024 1024
x x x
864 864 864
pixels pixel pixel
( ( (
333 333 333
x x x
281 281 281
millimeters millimet millimeter
) ) )
resolution resolut resolution
: : :
78 78 78
x x x
78 78 78
dots dot dot
per per per
inch inch inch
depths depth depth
( ( (
2 2 2
) ) )
: : :
1 1 1
, , ,
8 8 8
root root root
window window window
id id id
: : :
0 0 0
x x x
29 29 29
depth depth depth
of of of
root root root
window window window
: : :
8 8 8
planes plane plane
number number number
of of of
colormaps colormap colormaps
: : :
minimum minimum minimum
1 1 1
, , ,
maximum maximum maximum
1 1 1
default default default
colormap colormap colormap
: : :
0 0 0
x x x
27 27 27
default default default
number number number
of of of
colormap colormap colormap
cells cell cell
: : :
256 256 256
preallocated prealloc preallocated
pixels pixel pixel
: : :
black black black
1 1 1
, , ,
white white white
0 0 0
options option option
: : :
backing back back
- - -
store store store
YES yes YES
, , ,
save save save
- - -
unders under unders
YES yes YES
current current current
input input input
event event event
mask mask mask
: : :
0 0 0
xd xd xd
0001 0001 0001
d d d
KeyPressMask keypressmask KeyPressMask
ButtonPressMask buttonpressmask ButtonPressMask
ButtonReleaseMask buttonreleasemask ButtonReleaseMask
EnterWindowMask enterwindowmask EnterWindowMask
SubstructureRedirectMask substructureredirectmask SubstructureRedirectMask
PropertyChangeMask propertychangemask PropertyChangeMask
ColormapChangeMask colormapchangemask ColormapChangeMask
number number number
of of of
visuals visual visuals
: : :
5 5 5
default default default
visual visual visual
id id id
: : :
0 0 0
x x x
21 21 21
visual visual visual
: : :
visual visual visual
id id id
: : :
0 0 0
x x x
21 21 21
class class class
: : :
PseudoColor pseudocolor PseudoColor
depth depth depth
: : :
8 8 8
planes plane plane
size size size
of of of
colormap colormap colormap
: : :
256 256 256
entries entri entry
red red red
, , ,
green green green
, , ,
blue blue blue
masks mask mask
: : :
0 0 0
x x x
0 0 0
, , ,
0 0 0
x x x
0 0 0
, , ,
0 0 0
x x x
0 0 0
significant signific significant
bits bit bit
in in in
color color color
specification specif specification
: : :
8 8 8
bits bit bit
visual visual visual
: : :
visual visual visual
id id id
: : :
0 0 0
x x x
22 22 22
class class class
: : :
GrayScale grayscal GrayScale
depth depth depth
: : :
8 8 8
planes plane plane
size size size
of of of
colormap colormap colormap
: : :
256 256 256
entries entri entry
red red red
, , ,
green green green
, , ,
blue blue blue
masks mask mask
: : :
0 0 0
x x x
0 0 0
, , ,
0 0 0
x x x
0 0 0
, , ,
0 0 0
x x x
0 0 0
significant signific significant
bits bit bit
in in in
color color color
specification specif specification
: : :
8 8 8
bits bit bit
visual visual visual
: : :
visual visual visual
id id id
: : :
0 0 0
x x x
23 23 23
class class class
: : :
StaticGray staticgray StaticGray
depth depth depth
: : :
8 8 8
planes plane plane
size size size
of of of
colormap colormap colormap
: : :
256 256 256
entries entri entry
red red red
, , ,
green green green
, , ,
blue blue blue
masks mask mask
: : :
0 0 0
x x x
0 0 0
, , ,
0 0 0
x x x
0 0 0
, , ,
0 0 0
x x x
0 0 0
significant signific significant
bits bit bit
in in in
color color color
specification specif specification
: : :
8 8 8
bits bit bit
visual visual visual
: : :
visual visual visual
id id id
: : :
0 0 0
x x x
24 24 24
class class class
: : :
StaticColor staticcolor StaticColor
depth depth depth
: : :
8 8 8
planes plane plane
size size size
of of of
colormap colormap colormap
: : :
256 256 256
entries entri entry
red red red
, , ,
green green green
, , ,
blue blue blue
masks mask mask
: : :
0 0 0
x x x
7 7 7
, , ,
0 0 0
x x x
38 38 38
, , ,
0 0 0
xc xc xc
0 0 0
significant signific significant
bits bit bit
in in in
color color color
specification specif specification
: : :
8 8 8
bits bit bit
visual visual visual
: : :
visual visual visual
id id id
: : :
0 0 0
x x x
25 25 25
class class class
: : :
TrueColor truecolor TrueColor
depth depth depth
: : :
8 8 8
planes plane plane
size size size
of of of
colormap colormap colormap
: : :
8 8 8
entries entri entry
red red red
, , ,
green green green
, , ,
blue blue blue
masks mask mask
: : :
0 0 0
x x x
7 7 7
, , ,
0 0 0
x x x
38 38 38
, , ,
0 0 0
xc xc xc
0 0 0
significant signific significant
bits bit bit
in in in
color color color
specification specif specification
: : :
8 8 8
bits bit bit
number number number
of of of
mono mono mono
multibuffer multibuff multibuffer
types type type
: : :
5 5 5
visual visual visual
id id id
, , ,
max max max
buffers buffer buffer
, , ,
depth depth depth
: : :
0 0 0
x x x
21 21 21
, , ,
0 0 0
, , ,
8 8 8
visual visual visual
id id id
, , ,
max max max
buffers buffer buffer
, , ,
depth depth depth
: : :
0 0 0
x x x
22 22 22
, , ,
0 0 0
, , ,
8 8 8
visual visual visual
id id id
, , ,
max max max
buffers buffer buffer
, , ,
depth depth depth
: : :
0 0 0
x x x
23 23 23
, , ,
0 0 0
, , ,
8 8 8
visual visual visual
id id id
, , ,
max max max
buffers buffer buffer
, , ,
depth depth depth
: : :
0 0 0
x x x
24 24 24
, , ,
0 0 0
, , ,
8 8 8
visual visual visual
id id id
, , ,
max max max
buffers buffer buffer
, , ,
depth depth depth
: : :
0 0 0
x x x
25 25 25
, , ,
0 0 0
, , ,
8 8 8
number number number
of of of
stereo stereo stereo
multibuffer multibuff multibuffer
types type type
: : :
0 0 0
