From from From
: : :
cgordon cgordon cgordon
@ @ @
vpnet vpnet vpnet
. . .
chi chi chi
. . .
il il il
. . .
us us u
( ( (
gordon gordon gordon
hlavenka hlavenka hlavenka
) ) )
Subject subject Subject
: : :
Re re Re
: : :
Save save Save
my my my
hard hard hard
disk disk disk
? ? ?
! ! !
( ( (
allocation alloc allocation
error error error
, , ,
cross cross cross
- - -
linked link link
) ) )
Organization organ Organization
: : :
Vpnet vpnet Vpnet
Public public Public
Access access Access
Lines line Lines
: : :
137 137 137
Brad brad Brad
Banko banko Banko
writes write write
: : :
> > >
While while While
running run run
the the the
MS ms MS
Quick quick Quick
C c C
compiler compil compiler
in in in
a a a
DOS dos DOS
window window window
under under under
Windows window Windows
3 3 3
. . .
1 1 1
> > >
this this this
evening even evening
, , ,
I i I
got got get
a a a
" " "
program program program
has has have
violated violat violate
system system system
integrity integr integrity
. . .
. . .
. . .
close close close
all all all
> > >
applications applic application
, , ,
exit exit exit
windows window window
and and and
restart restart restart
your your your
computer comput computer
" " "
error error error
. . .
Gawd gawd Gawd
, , ,
I i I
love love love
Windows window Windows
: : :
- - -
) ) )
> > >
1 1 1
) ) )
Is is Is
there there there
an an an
easy easi easy
way way way
to to to
restore restor restore
everything everyth everything
to to to
working work work
order order order
? ? ?
> > >
What what What
might might might
be be be
some some some
better better good
approaches approach approach
? ? ?
You you You
' ' '
ll ll ll
probably probabl probably
want want want
to to to
delete delet delete
any ani any
damaged damag damage
executables execut executables
and and and
reload reload reload
them them them
fresh fresh fresh
. . .
Data data Data
files file file
should should should
be be be
examined examin examine
and and and
repaired repair repair
. . .
> > >
2 2 2
) ) )
What what What
might might might
have have have
caused caus cause
this this this
? ? ?
Does doe Does
the the the
SMARTDRV smartdrv SMARTDRV
cache cach cache
make make make
me me me
more more more
> > >
vulnerable vulner vulnerable
? ? ?
( ( (
I i I
' ' '
m m m
suspicious suspici suspicious
of of of
hard hard hard
drive drive drive
caches cach cache
especially especi especially
when when when
they they they
> > >
cache cach cache
data data data
writing write write
. . .
) ) )
You you You
' ' '
re re re
not not not
stupid stupid stupid
. . .
Smartdrive smartdriv Smartdrive
caches cach cache
things thing thing
, , ,
and and and
Windows window Windows
also also also
runs run run
a a a
swap swap swap
file file file
which which which
may may may
contain contain contain
data data data
also also also
. . .
All all All
of of of
this this this
is is be
pretty pretti pretty
risky riski risky
stuff stuff stuff
in in in
a a a
PC pc PC
environment environ environment
. . .
> > >
The the The
straightforward straightforward straightforward
approach approach approach
would would would
be be be
to to to
run run run
chkdsk chkdsk chkdsk
with with with
the the the
/ / /
f f f
option option option
to to to
> > >
fix fix fix
the the the
disk disk disk
and and and
then then then
it it it
looks look look
like like like
I i I
would would would
probably probabl probably
have have have
to to to
reinstall reinstal reinstall
Windows window Windows
> > >
and and and
a a a
few few few
other other other
things thing thing
. . .
A a A
reasonably reason reasonably
accurate accur accurate
prediction predict prediction
. . .
. . .
. . .
Here here Here
' ' '
s s s
a a a
brief brief brief
description descript description
of of of
how how how
DOS dos DOS
stores store store
files file file
: : :
There there There
are are be
three three three
pieces piec piece
to to to
a a a
file file file
. . .
The the The
directory directori directory
entry entri entry
, , ,
the the the
FAT fat FAT
chain chain chain
, , ,
and and and
the the the
data data data
area area area
. . .
You you You
can can can
think think think
of of of
these these these
as as a
a a a
sheet sheet sheet
of of of
lined line lined
notebook notebook notebook
paper paper paper
, , ,
a a a
sheet sheet sheet
of of of
graph graph graph
paper paper paper
, , ,
and and and
a a a
stack stack stack
of of of
3 3 3
X x X
5 5 5
cards card card
. . .
The the The
directory directori directory
entry entri entry
( ( (
notebook notebook notebook
paper paper paper
) ) )
holds hold hold
the the the
file file file
name name name
, , ,
actual actual actual
size size size
, , ,
and and and
first first first
cluster cluster cluster
number number number
. . .
It it It
also also also
holds hold hold
some some some
other other other
information inform information
that that that
' ' '
s s s
not not not
important import important
right right right
now now now
. . .
The the The
File file File
Allocation alloc Allocation
Table tabl Table
( ( (
FAT fat FAT
) ) )
chain chain chain
( ( (
graph graph graph
paper paper paper
) ) )
tells tell tell
where where where
to to to
find find find
the the the
actual actual actual
data data data
. . .
Each each Each
square squar square
of of of
graph graph graph
paper paper paper
holds hold hold
a a a
number number number
. . .
If if If
the the the
number number number
is is be
zero zero zero
, , ,
the the the
cluster cluster cluster
associated associ associate
with with with
this this this
box box box
is is be
available avail available
. . .
If if If
it it it
holds hold hold
a a a
" " "
magic magic magic
" " "
number number number
, , ,
it it it
is is be
either either either
the the the
last last last
piece piec piece
of of of
a a a
file file file
or or or
a a a
bad bad bad
( ( (
unuseable unus unuseable
) ) )
spot spot spot
on on on
the the the
disk disk disk
. . .
Any ani Any
other other other
number number number
tells tell tell
which which which
cluster cluster cluster
contains contain contain
the the the
next next next
section section section
of of of
the the the
file file file
. . .
The the The
data data data
area area area
( ( (
3 3 3
X x X
5 5 5
cards card card
) ) )
is is be
where where where
the the the
actual actual actual
information inform information
is is be
stored store store
. . .
The the The
data data data
area area area
is is be
organized organ organize
as as a
clusters cluster cluster
of of of
a a a
fixed fix fixed
size size size
; ; ;
storage storag storage
is is be
doled dole doled
out out out
in in in
" " "
chunks chunk chunk
" " "
of of of
one one one
cluster cluster cluster
each each each
. . .
( ( (
In in In
your your your
case case case
, , ,
one one one
cluster cluster cluster
is is be
2048 2048 2048
bytes byte byte
. . .
) ) )
As as As
a a a
cluster cluster cluster
is is be
filled fill fill
, , ,
another anoth another
is is be
allocated alloc allocate
. . .
To to To
read read read
a a a
file file file
, , ,
you you you
first first first
look look look
at at at
the the the
directory directori directory
entry entri entry
to to to
get get get
the the the
starting start starting
cluster cluster cluster
number number number
. . .
Now now Now
you you you
read read read
the the the
data data data
from from from
that that that
cluster cluster cluster
. . .
Next next Next
, , ,
look look look
at at at
the the the
FAT fat FAT
entry entri entry
for for for
the the the
cluster cluster cluster
you you you
just just just
read read read
. . .
This this This
will will will
tell tell tell
you you you
the the the
cluster cluster cluster
number number number
for for for
the the the
next next next
chunk chunk chunk
of of of
the the the
file file file
. . .
Naturally natur Naturally
, , ,
these these these
numbers number number
are are be
usually usual usually
sequential sequenti sequential
, , ,
but but but
they they they
can can can
jump jump jump
around around around
and and and
even even even
go go go
backwards backward backwards
. . .
Continue continu Continue
reading read reading
, , ,
one one one
cluster cluster cluster
at at at
a a a
time time time
, , ,
as as a
you you you
walk walk walk
this this this
chain chain chain
through through through
the the the
FAT fat FAT
, , ,
until until until
you you you
hit hit hit
the the the
marker marker marker
which which which
says say say
it it it
' ' '
s s s
the the the
last last last
cluster cluster cluster
in in in
the the the
file file file
. . .
CHKDSK chkdsk CHKDSK
is is be
the the the
DOS dos DOS
utility util utility
that that that
checks check check
the the the
sanity saniti sanity
and and and
coherence coher coherence
of of of
the the the
directories directori directory
and and and
the the the
FAT fat FAT
and and and
can can can
bludgeon bludgeon bludgeon
most most most
flaws flaw flaw
into into into
submission submiss submission
. . .
It it It
doesn doesn doesn
' ' '
t t t
have have have
any ani any
intelligence intellig intelligence
, , ,
so so so
you you you
have have have
to to to
double doubl double
- - -
check check check
anything anyth anything
it it it
" " "
fixes fix fixes
" " "
. . .
Now now Now
let let let
' ' '
s s s
do do do
a a a
bit bit bit
of of of
a a a
post post post
- - -
mortem mortem mortem
: : :
> > >
C c C
: : :
\ \ \
GFX gfx GFX
\ \ \
VPIC vpic VPIC
46 46 46
\ \ \
CVPIC cvpic CVPIC
. . .
EXE exe EXE
> > >
C c C
: : :
\ \ \
GFX gfx GFX
\ \ \
VPIC vpic VPIC
46 46 46
\ \ \
VPIC vpic VPIC
. . .
TXT txt TXT
> > >
C c C
: : :
\ \ \
GFX gfx GFX
\ \ \
VPIC vpic VPIC
46 46 46
\ \ \
VIDEO video VIDEO
7 7 7
. . .
CFG cfg CFG
> > >
C c C
: : :
\ \ \
GFX gfx GFX
\ \ \
VPIC vpic VPIC
46 46 46
\ \ \
ORCPRO orcpro ORCPRO
2 2 2
. . .
CFG cfg CFG
> > >
C c C
: : :
\ \ \
GFX gfx GFX
\ \ \
VPIC vpic VPIC
46 46 46
\ \ \
VGA vga VGA
. . .
CFG cfg CFG
> > >
C c C
: : :
\ \ \
GAME game GAME
\ \ \
GOOSE goos GOOSE
\ \ \
BIRD bird BIRD
2 2 2
. . .
X x X
> > >
C c C
: : :
\ \ \
WINMISC winmisc WINMISC
\ \ \
ADV adv ADV
21 21 21
\ \ \
WINADV winadv WINADV
. . .
EXE exe EXE
> > >
Allocation alloc Allocation
error error error
, , ,
size size size
adjusted adjust adjust
All all All
of of of
these these these
files file file
have have have
sizes size size
( ( (
according accord accord
to to to
the the the
FAT fat FAT
) ) )
which which which
don don don
' ' '
t t t
match match match
the the the
size size size
reported report report
in in in
their their their
directory directori directory
entries entri entry
. . .
CHKDSK chkdsk CHKDSK
/ / /
F f F
will will will
alter alter alter
the the the
directory directori directory
entries entri entry
to to to
match match match
the the the
FAT fat FAT
size size size
. . .
( ( (
In in In
other other other
words word word
, , ,
the the the
directory directori directory
entry entri entry
for for for
CVPIC cvpic CVPIC
. . .
EXE exe EXE
may may may
say say say
the the the
file file file
is is be
64 64 64
, , ,
877 877 877
bytes byte byte
long long long
. . .
But but But
CHKDSK chkdsk CHKDSK
found found find
a a a
FAT fat FAT
chain chain chain
of of of
43 43 43
clusters cluster cluster
attached attach attach
to to to
it it it
. . .
( ( (
My my My
numbers number number
, , ,
obviously obvious obviously
, , ,
are are be
made made make
up up up
. . .
) ) )
) ) )
> > >
316 316 316
lost lost lose
allocation alloc allocation
units unit unit
found found find
in in in
224 224 224
chains chain chain
. . .
> > >
647168 647168 647168
bytes byte byte
disk disk disk
space space space
would would would
be be be
freed freed free
Disk disk Disk
space space space
was was be
found found find
which which which
is is be
allocated alloc allocate
in in in
the the the
FAT fat FAT
, , ,
but but but
is is be
not not not
attached attach attach
to to to
any ani any
directory directori directory
entry entri entry
. . .
CHKDSK chkdsk CHKDSK
/ / /
F f F
gives give give
you you you
the the the
option option option
of of of
converting convert convert
these these these
" " "
lost lost lose
chains chain chain
" " "
to to to
files file file
. . .
You you You
can can can
then then then
examine examin examine
the the the
files file file
( ( (
FILE file FILE
0000 0000 0000
. . .
CHK chk CHK
through through through
FILE file FILE
0223 0223 0223
. . .
CHK chk CHK
) ) )
and and and
rename renam rename
or or or
discard discard discard
them them them
. . .
Or or Or
, , ,
if if if
you you you
tell tell tell
CHKDSK chkdsk CHKDSK
_ _ _
not not not
_ _ _
to to to
convert convert convert
them them them
to to to
files file file
, , ,
then then then
those those those
clusters cluster cluster
will will will
simply simpli simply
be be be
marked mark mark
" " "
available avail available
" " "
in in in
the the the
FAT fat FAT
. . .
> > >
C c C
: : :
\ \ \
GFX gfx GFX
\ \ \
VPIC vpic VPIC
46 46 46
\ \ \
CVPIC cvpic CVPIC
. . .
EXE exe EXE
> > >
Is is Is
cross cross cross
linked link link
on on on
allocation alloc allocation
unit unit unit
16133 16133 16133
. . .
. . .
. . .
> > >
C c C
: : :
\ \ \
386 386 386
SPART spart SPART
. . .
PAR par PAR
> > >
Is is Is
cross cross cross
linked link link
on on on
allocation alloc allocation
unit unit unit
16133 16133 16133
These these These
files file file
are are be
both both both
referencing referenc reference
the the the
_ _ _
same same same
_ _ _
data data data
cluster cluster cluster
. . .
Obviously obvious Obviously
, , ,
one one one
of of of
them them them
( ( (
at at at
least least least
) ) )
must must must
be be be
wrong wrong wrong
. . .
It it It
' ' '
s s s
interesting interest interest
to to to
note note note
that that that
C c C
: : :
\ \ \
386 386 386
SPART spart SPART
. . .
PAR par PAR
is is be
your your your
Windows window Windows
swap swap swap
file file file
. . .
. . .
. . .
To to To
fix fix fix
this this this
, , ,
you you you
should should should
copy copi copy
each each each
cross cross cross
- - -
linked link link
file file file
to to to
a a a
new new new
name name name
. . .
This this This
will will will
" " "
fix fix fix
" " "
the the the
cross cross cross
- - -
link link link
by by by
giving give give
the the the
files file file
unique uniqu unique
data data data
spaces space space
. . .
Now now Now
delete delet delete
the the the
cross cross cross
- - -
linked link link
files file file
. . .
Examine examin Examine
the the the
copies copi copy
and and and
try tri try
to to to
assemble assembl assemble
them them them
properly proper properly
. . .
Good good Good
luck luck luck
. . .
( ( (
Hint hint Hint
: : :
" " "
Missing miss Missing
pieces piec piece
" " "
are are be
likely like likely
to to to
be be be
found found find
in in in
those those those
" " "
lost lost lose
chains chain chain
" " "
at at at
the the the
top top top
. . .
. . .
. . .
) ) )
> > >
42366976 42366976 42366976
bytes byte byte
total total total
disk disk disk
space space space
> > >
3958784 3958784 3958784
bytes byte byte
in in in
4 4 4
hidden hidden hidden
files file file
> > >
153600 153600 153600
bytes byte byte
in in in
67 67 67
directories directori directory
> > >
36042752 36042752 36042752
bytes byte byte
in in in
1496 1496 1496
user user user
files file file
> > >
1564672 1564672 1564672
bytes byte byte
available avail available
on on on
disk disk disk
Your your Your
disk disk disk
is is be
pretty pretti pretty
close close close
to to to
full full full
. . .
This this This
may may may
be be be
the the the
actual actual actual
cause caus cause
of of of
the the the
problem problem problem
; ; ;
perhaps perhap perhaps
Windows window Windows
needed need need
to to to
expand expand expand
its it it
swapfile swapfil swapfile
by by by
an an an
amount amount amount
which which which
exceeded exceed exceed
available avail available
disk disk disk
space space space
. . .
. . .
. . .
In in In
any ani any
case case case
, , ,
the the the
short short short
summary summari summary
is is be
that that that
something someth something
trashed trash trash
your your your
FAT fat FAT
. . .
There there There
are are be
utilities util utility
that that that
can can can
mirror mirror mirror
your your your
FAT fat FAT
and and and
help help help
repair repair repair
damage damag damage
after after after
something someth something
like like like
this this this
, , ,
but but but
you you you
have have have
to to to
run run run
them them them
_ _ _
before befor before
_ _ _
the the the
problem problem problem
occurs occur occur
. . .
Sorry sorri Sorry
. . .
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
Gordon gordon Gordon
S s S
. . .
Hlavenka hlavenka Hlavenka
cgordon cgordon cgordon
@ @ @
vpnet vpnet vpnet
. . .
chi chi chi
. . .
il il il
. . .
us us u
Vote vote Vote
straight straight straight
ticket ticket ticket
Procrastination procrastin Procrastination
party parti party
Dec dec Dec
. . .
3 3 3
rd rd rd
! ! !
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
- - -
Gordon gordon Gordon
S s S
. . .
Hlavenka hlavenka Hlavenka
cgordon cgordon cgordon
@ @ @
vpnet vpnet vpnet
. . .
chi chi chi
. . .
il il il
. . .
us us u
Vote vote Vote
straight straight straight
ticket ticket ticket
Procrastination procrastin Procrastination
party parti party
Dec dec Dec
. . .
3 3 3
rd rd rd
! ! !
